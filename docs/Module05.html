
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visualizing Data with {ggplot2} &#8212; Data Analytics with R (MPA 5830)</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://aniruhil.github.io/jb530-repo/index.html/docs/Module05.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Data Visualization" href="Module06.html" />
    <link rel="prev" title="Managing dates and Times with {lubridate}" href="Module04.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo5830.svg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analytics with R (MPA 5830)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Intro.html">
   Introduction to MPA 5830
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reading Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Module01.html">
   Reading data in R
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Cleaning &amp; Organizng Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Module02.html">
   Cleaning Data with {dplyr}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Module03.html">
   Rearranging Data with {tidyr}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Module04.html">
   Managing dates and Times with {lubridate}
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Visualizing Data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Visualizing Data with {ggplot2}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Module06.html">
   Advanced Data Visualization
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/docs/Module05.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/aniruhil/jb5830-repo"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/aniruhil/jb5830-repo/issues/new?title=Issue%20on%20page%20%2Fdocs/Module05.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/aniruhil/jb5830-repo/main?urlpath=tree/docs/docs/Module05.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Visualizing Data with {ggplot2}
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-and-the-grammar-of-graphics">
   <code class="docutils literal notranslate">
    <span class="pre">
     ggplot2
    </span>
   </code>
   and the grammar of graphics
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#geom-bar-the-bar-chart">
     <code class="docutils literal notranslate">
      <span class="pre">
       geom_bar()
      </span>
     </code>
     … the bar-chart
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#color-versus-fill">
     <code class="docutils literal notranslate">
      <span class="pre">
       color
      </span>
     </code>
     versus
     <code class="docutils literal notranslate">
      <span class="pre">
       fill
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-labels-with-labs">
     Adding labels with
     <code class="docutils literal notranslate">
      <span class="pre">
       labs
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#controlling-the-chart-legend-with-theme">
     Controlling the chart legend with
     <code class="docutils literal notranslate">
      <span class="pre">
       theme()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customizing-colors">
     Customizing colors
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#selected-color-palettes">
     Selected color palettes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#themes-with-ggthemes">
     Themes with
     <code class="docutils literal notranslate">
      <span class="pre">
       {ggthemes}
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-with-bar-charts">
     More with bar-charts
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#disaggregating-bar-charts-for-groups">
     Disaggregating bar-charts for groups
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#histograms">
     Histograms
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#box-plots">
     Box-plots
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#line-charts">
     Line-charts
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scatter-plots">
     Scatter-plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises-for-practice">
   Exercises for Practice
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-01-nobel-prize-winners">
     Exercise 01 – Nobel Prize Winners
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-02-water-levels-in-the-great-lakes">
     Exercise 02 – Water levels in the Great Lakes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-03-county-health-rankings">
     Exercise 03 – County Health Rankings
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-04-unemployment-rates">
     Exercise 04 – Unemployment Rates
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Visualizing Data with {ggplot2}</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Visualizing Data with {ggplot2}
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-and-the-grammar-of-graphics">
   <code class="docutils literal notranslate">
    <span class="pre">
     ggplot2
    </span>
   </code>
   and the grammar of graphics
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#geom-bar-the-bar-chart">
     <code class="docutils literal notranslate">
      <span class="pre">
       geom_bar()
      </span>
     </code>
     … the bar-chart
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#color-versus-fill">
     <code class="docutils literal notranslate">
      <span class="pre">
       color
      </span>
     </code>
     versus
     <code class="docutils literal notranslate">
      <span class="pre">
       fill
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-labels-with-labs">
     Adding labels with
     <code class="docutils literal notranslate">
      <span class="pre">
       labs
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#controlling-the-chart-legend-with-theme">
     Controlling the chart legend with
     <code class="docutils literal notranslate">
      <span class="pre">
       theme()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customizing-colors">
     Customizing colors
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#selected-color-palettes">
     Selected color palettes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#themes-with-ggthemes">
     Themes with
     <code class="docutils literal notranslate">
      <span class="pre">
       {ggthemes}
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-with-bar-charts">
     More with bar-charts
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#disaggregating-bar-charts-for-groups">
     Disaggregating bar-charts for groups
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#histograms">
     Histograms
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#box-plots">
     Box-plots
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#line-charts">
     Line-charts
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scatter-plots">
     Scatter-plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises-for-practice">
   Exercises for Practice
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-01-nobel-prize-winners">
     Exercise 01 – Nobel Prize Winners
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-02-water-levels-in-the-great-lakes">
     Exercise 02 – Water levels in the Great Lakes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-03-county-health-rankings">
     Exercise 03 – County Health Rankings
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-04-unemployment-rates">
     Exercise 04 – Unemployment Rates
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="visualizing-data-with-ggplot2">
<h1>Visualizing Data with {ggplot2}<a class="headerlink" href="#visualizing-data-with-ggplot2" title="Permalink to this headline">¶</a></h1>
<p>Our goal in this module is to understand some basic ways of visualizing data with graphics – bar-charts, histograms, box-plots, and so on. We will skip <code class="docutils literal notranslate"><span class="pre">base</span> <span class="pre">R</span></code> commands and instead just work with <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code>, the most popular visualization package in the <code class="docutils literal notranslate"><span class="pre">{tidyverse}</span></code> universe as of now.</p>
<p>If you remember MPA 6010, recall the usual options…</p>
<ul class="simple">
<li><p>one qualitative/categorical variables: <code class="docutils literal notranslate"><span class="pre">bar-chart</span></code></p></li>
<li><p>one quantitative/continuous variables: <code class="docutils literal notranslate"><span class="pre">histogram/box-plot/area-chart</span></code></p></li>
<li><p>two quantitative/continuous variables: <code class="docutils literal notranslate"><span class="pre">scatter-plot/hex-bin</span></code></p></li>
</ul>
<p>We can then ratchet up as we need to.</p>
<p>I will use two data-sets to walk through the initial examples in this module, the first being this <a class="reference external" href="http://imdb.com/">IMDB data-set</a></p>
<blockquote>
<div><p>The internet movie database, <a class="reference external" href="http://imdb.com/">http://imdb.com/</a>, is a website devoted to collecting movie data supplied by studios and fans. It claims to be the biggest movie database on the web and is run by amazon. More about information <a class="reference external" href="http://imdb.com">imdb.com</a> can be found online, <a class="reference external" href="http://imdb.com/help/show_">http://imdb.com/help/show_</a> leaf?about, including information about the data collection process, <a class="reference external" href="http://imdb.com/help/show_leaf?infosource">http://imdb.com/help/show_leaf?infosource</a>.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2movies</span><span class="p">)</span>
<span class="nf">data</span><span class="p">(</span><span class="n">movies</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">movies</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'title'</li><li>'year'</li><li>'length'</li><li>'budget'</li><li>'rating'</li><li>'votes'</li><li>'r1'</li><li>'r2'</li><li>'r3'</li><li>'r4'</li><li>'r5'</li><li>'r6'</li><li>'r7'</li><li>'r8'</li><li>'r9'</li><li>'r10'</li><li>'mpaa'</li><li>'Action'</li><li>'Animation'</li><li>'Comedy'</li><li>'Drama'</li><li>'Documentary'</li><li>'Romance'</li><li>'Short'</li></ol>
</div></div>
</div>
<p>A data frame with 28819 rows and 24 variables</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Variable</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>title</p></td>
<td class="text-align:left"><p>Title of the movie</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>year</p></td>
<td class="text-align:left"><p>Year of release</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>budget</p></td>
<td class="text-align:left"><p>Total budget (if known) in US dollars</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>length</p></td>
<td class="text-align:left"><p>Length in minutes</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>rating</p></td>
<td class="text-align:left"><p>Average IMDB user rating</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>votes</p></td>
<td class="text-align:left"><p>Number of IMDB users who rated this movie</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>r1-10</p></td>
<td class="text-align:left"><p>Multiplying by ten gives percentile (to nearest 10%) of users who rated this movie a 1</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>mpaa</p></td>
<td class="text-align:left"><p>MPAA rating (missing for a lot of movies)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>action, animation, comedy, drama, documentary, romance, short</p></td>
<td class="text-align:left"><p>Binary variables representing if movie was classified as belonging to that genre</p></td>
</tr>
</tbody>
</table>
<p>The second data-set is the <a class="reference external" href="https://swapi.co">Star Wars dataset</a>, a <code class="docutils literal notranslate"><span class="pre">tibble</span></code> with 87 rows and 13 variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">data</span><span class="p">(</span><span class="n">starwars</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">starwars</span><span class="p">)</span>
<span class="c1"># str(starwars)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Attaching packages</span> ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.1 ──
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">ggplot2</span> 3.3.5     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">purrr  </span> 0.3.4
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tibble </span> 3.1.6     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">dplyr  </span> 1.0.7
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tidyr  </span> 1.1.4     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">stringr</span> 1.4.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">readr  </span> 2.1.1     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">forcats</span> 0.5.1
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Conflicts</span> ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">filter()</span> masks <span class=" -Color -Color-Blue">stats</span>::filter()
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">lag()</span>    masks <span class=" -Color -Color-Blue">stats</span>::lag()
</pre></div>
</div>
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'name'</li><li>'height'</li><li>'mass'</li><li>'hair_color'</li><li>'skin_color'</li><li>'eye_color'</li><li>'birth_year'</li><li>'sex'</li><li>'gender'</li><li>'homeworld'</li><li>'species'</li><li>'films'</li><li>'vehicles'</li><li>'starships'</li></ol>
</div></div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Variable</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>name</p></td>
<td class="text-align:left"><p>Name of the character</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>height</p></td>
<td class="text-align:left"><p>Height (cm)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>mass</p></td>
<td class="text-align:left"><p>Weight (kg)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>hair_color, skin_color, eye_color</p></td>
<td class="text-align:left"><p>Hair, skin, and eye colors</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>birth_year</p></td>
<td class="text-align:left"><p>Year born (BBY = Before Battle of Yavin)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>gender</p></td>
<td class="text-align:left"><p>male, female, hermaphrodite, or none</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>homeworld</p></td>
<td class="text-align:left"><p>Name of homeworld</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>species</p></td>
<td class="text-align:left"><p>Name of species</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>films</p></td>
<td class="text-align:left"><p>List of films the character appeared in</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>vehicles</p></td>
<td class="text-align:left"><p>List of vehicles the character has piloted</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>starships</p></td>
<td class="text-align:left"><p>List of starships the character has piloted</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-and-the-grammar-of-graphics">
<h1><code class="docutils literal notranslate"><span class="pre">ggplot2</span></code> and the <a class="reference external" href="http://vita.had.co.nz/papers/layered-grammar.html">grammar of graphics</a><a class="headerlink" href="#ggplot2-and-the-grammar-of-graphics" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">{ggplot2}</span></code> package has a special syntax and I will point out things you should note as we move through this module. First up, the library is called <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code> but the command starts with <code class="docutils literal notranslate"><span class="pre">ggplot</span></code> so don’t let that throw you off-track.</p>
<p>Second, you need to have a data-set to work with. In the code below I start by loading the library and then specifying the data-set to be used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">options</span><span class="p">(</span><span class="n">repr.plot.width</span> <span class="o">=</span> <span class="m">16</span><span class="p">,</span> <span class="n">repr.plot.height</span> <span class="o">=</span> <span class="m">8</span><span class="p">)</span> 

<span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_8_0.png" src="../_images/Module05_8_0.png" />
</div>
</div>
<p>Nothing results from these commands because we have not yet specified anything about what should go on the x-axis, what should go on the y-axis. Well, let us do that then by asking for the column <code class="docutils literal notranslate"><span class="pre">eye_color</span></code> to be put on the x-axis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_10_0.png" src="../_images/Module05_10_0.png" />
</div>
</div>
<div class="section" id="geom-bar-the-bar-chart">
<h2><code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> … the bar-chart<a class="headerlink" href="#geom-bar-the-bar-chart" title="Permalink to this headline">¶</a></h2>
<p>This results in a gray canvas with the eye colors on the x-axis but nothing else has been drawn since we have not specified the <code class="docutils literal notranslate"><span class="pre">geometry</span></code> … do you want a bar-chart? histogram? dot-plot? line-chart? This is a categorical variable and hence a bar-chart would be appropriate. We call for a bar-chart with the <code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> command.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_12_0.png" src="../_images/Module05_12_0.png" />
</div>
</div>
</div>
<div class="section" id="color-versus-fill">
<h2><code class="docutils literal notranslate"><span class="pre">color</span></code> versus <code class="docutils literal notranslate"><span class="pre">fill</span></code><a class="headerlink" href="#color-versus-fill" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">aes()</span></code> refers to the <strong>aesthetics</strong> of the chart, and many other <code class="docutils literal notranslate"><span class="pre">aesthetics</span></code> can be added, such as <code class="docutils literal notranslate"><span class="pre">group</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">fill</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, etc. We will see some of these in due course but for now I want to focus on two of these, both involving coloring of the <code class="docutils literal notranslate"><span class="pre">geom_</span></code>. Specifically, there are two commands for adding colors – (1) <code class="docutils literal notranslate"><span class="pre">color</span></code> or <code class="docutils literal notranslate"><span class="pre">colour</span></code>, and (2) <code class="docutils literal notranslate"><span class="pre">fill</span></code> – to a chart.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_14_0.png" src="../_images/Module05_14_0.png" />
</div>
</div>
<p>Note what the <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span> <span class="pre">eye_color</span></code> command did … it drew a colored border for the bars, and an accompanying legend. What if we had used <code class="docutils literal notranslate"><span class="pre">fill</span> <span class="pre">=</span> <span class="pre">eye_color</span></code> instead?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span><span class="p">,</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_16_0.png" src="../_images/Module05_16_0.png" />
</div>
</div>
<p>Aha! Now the bars are filled with colors and an accompanying legend is drawn as well. So <code class="docutils literal notranslate"><span class="pre">fill</span> <span class="pre">=</span></code> and <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">=</span></code> behave very differently, bear this in mind.</p>
</div>
<div class="section" id="adding-labels-with-labs">
<h2>Adding labels with <code class="docutils literal notranslate"><span class="pre">labs</span></code><a class="headerlink" href="#adding-labels-with-labs" title="Permalink to this headline">¶</a></h2>
<p>One of the nice things about this software environment is that there are plenty of coloring schemes available to us and we will play with some of these shortly, but before we do that, let us look at one more improvement – adding titles, subtitles, captions, and axis labels to our chart. This is done with the <code class="docutils literal notranslate"><span class="pre">labs</span> <span class="pre">=</span> <span class="pre">()</span></code> command.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span><span class="p">,</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Eye Color&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency (n)&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Eye Colors&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;My little work of art!!&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_18_0.png" src="../_images/Module05_18_0.png" />
</div>
</div>
<p>Notice the text that now appears as a result of what has been specified in the <code class="docutils literal notranslate"><span class="pre">labs()</span></code> command.</p>
</div>
<div class="section" id="controlling-the-chart-legend-with-theme">
<h2>Controlling the chart legend with <code class="docutils literal notranslate"><span class="pre">theme()</span></code><a class="headerlink" href="#controlling-the-chart-legend-with-theme" title="Permalink to this headline">¶</a></h2>
<p>In this bar-chart, do we really need the legend? No, because the colors and color names show up in the chart itself. How can we hide the legend? Turns out there is a neat command that will allow you to move the legend around and even to hide it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span><span class="p">,</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Eye Color&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency (n)&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Eye Colors&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;My little work of art!!&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_20_0.png" src="../_images/Module05_20_0.png" />
</div>
</div>
<p>Voila! The legend is gone. Instead of “none” you could have specified “bottom”, “left”, “top”, “right” to place the legend in a particular direction.</p>
</div>
<div class="section" id="customizing-colors">
<h2>Customizing colors<a class="headerlink" href="#customizing-colors" title="Permalink to this headline">¶</a></h2>
<p>Of course, it would be good to have the colors match the eye-color so let us do that next. The way we can do this is by calling specific colors by name. I have tried to order the lineup of the colors to match, as closely as I can, the eye colors.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span>
  <span class="s">&quot;black&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="s">&quot;slategray&quot;</span><span class="p">,</span> <span class="s">&quot;brown&quot;</span><span class="p">,</span> <span class="s">&quot;gray34&quot;</span><span class="p">,</span> <span class="s">&quot;gold&quot;</span><span class="p">,</span>
  <span class="s">&quot;greenyellow&quot;</span><span class="p">,</span> <span class="s">&quot;navajowhite1&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;pink&quot;</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span>
  <span class="s">&quot;magenta&quot;</span><span class="p">,</span> <span class="s">&quot;thistle3&quot;</span><span class="p">,</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="s">&quot;yellow&quot;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mycolors</span>

<span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="n">mycolors</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Eye Color&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency (n)&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Eye Colors&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;My little work of art!!&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_22_0.png" src="../_images/Module05_22_0.png" />
</div>
</div>
<p>These colors are from <a class="reference external" href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">this source</a> but see also <a class="reference external" href="https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/colorPaletteCheatsheet.pdf">this source</a>. Colors can be customized by generating your own palettes via the <a class="reference external" href="http://colorbrewer2.org/#type=sequential&amp;scheme=YlGnBu&amp;n=3">Color Brewer here</a>. But don’t get carried away: Remember to read the materials on choosing colors wisely, particularly the point about qualitative palettes, divergent palettes, and then palettes that work well even with colorblind audiences.</p>
</div>
<div class="section" id="selected-color-palettes">
<h2>Selected color palettes<a class="headerlink" href="#selected-color-palettes" title="Permalink to this headline">¶</a></h2>
<p>I had mentioned the existence of a number of color palettes so let us look at a few, but we will do this with a different variable. First up, the <code class="docutils literal notranslate"><span class="pre">Pastel1</span></code> palette.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_brewer</span><span class="p">(</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="s">&quot;Pastel1&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_24_0.png" src="../_images/Module05_24_0.png" />
</div>
</div>
<p>Not bad but doesn’t work too well here. How about trying another palette, <code class="docutils literal notranslate"><span class="pre">Set</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_brewer</span><span class="p">(</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="s">&quot;Set1&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_26_0.png" src="../_images/Module05_26_0.png" />
</div>
</div>
<p>Nice! But what is also noticeable here is that there are some characters in the data-set whose gender data is missing. These are the <code class="docutils literal notranslate"><span class="pre">NA</span></code> values. By default, you will see <code class="docutils literal notranslate"><span class="pre">NA</span></code> values showing up in some types of charts and so it is always good to exclude them from the chart. Here is one way of doing that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="nf">subset</span><span class="p">(</span><span class="n">starwars</span><span class="p">,</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">gender</span><span class="p">)),</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_brewer</span><span class="p">(</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="s">&quot;Set1&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_28_0.png" src="../_images/Module05_28_0.png" />
</div>
</div>
<p>Notice what is different here: <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">subset(starwars,</span> <span class="pre">!is.na(gender))</span></code> and that this command is effectively saying subset the starwars data to only include those cases where gender is not missing (this is the <code class="docutils literal notranslate"><span class="pre">!is.na()</span></code> portion of the command).</p>
<p>Another way to do the same thing would have been to use <code class="docutils literal notranslate"><span class="pre">filter()</span></code> and create a cleaned up copy of the data. If you take this route, be careful not to overwrite the original data-set; note how I am giving a new name <code class="docutils literal notranslate"><span class="pre">(my.data)</span></code> after <code class="docutils literal notranslate"><span class="pre">filter()</span></code> to save the results in. Then we lean on this data-set via <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">my.data</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">starwars</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">gender</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">my.data</span>

<span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">my.data</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_brewer</span><span class="p">(</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="s">&quot;Set1&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_30_0.png" src="../_images/Module05_30_0.png" />
</div>
</div>
<p>There is one color palette you should remember, and this is the <code class="docutils literal notranslate"><span class="pre">{viridis}</span></code> color scheme that works around varying types of color blindness in the population. Here come the palettes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">my.data</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_viridis_d</span><span class="p">(</span>
    <span class="n">option</span> <span class="o">=</span> <span class="s">&quot;viridis&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_32_0.png" src="../_images/Module05_32_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">my.data</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_viridis_d</span><span class="p">(</span>
    <span class="n">option</span> <span class="o">=</span> <span class="s">&quot;magma&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_33_0.png" src="../_images/Module05_33_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">my.data</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_viridis_d</span><span class="p">(</span>
    <span class="n">option</span> <span class="o">=</span> <span class="s">&quot;plasma&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_34_0.png" src="../_images/Module05_34_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">my.data</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">gender</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">gender</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Gender&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Bar-chart of Gender&quot;</span><span class="p">,</span>
    <span class="n">subttitle</span> <span class="o">=</span> <span class="s">&quot;(of Star Wars characters)&quot;</span><span class="p">,</span>
    <span class="n">caption</span> <span class="o">=</span> <span class="s">&quot;(Source: The dplyr package)&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_fill_viridis_d</span><span class="p">(</span>
    <span class="n">option</span> <span class="o">=</span> <span class="s">&quot;cividis&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_35_0.png" src="../_images/Module05_35_0.png" />
</div>
</div>
</div>
<div class="section" id="themes-with-ggthemes">
<h2>Themes with <code class="docutils literal notranslate"><span class="pre">{ggthemes}</span></code><a class="headerlink" href="#themes-with-ggthemes" title="Permalink to this headline">¶</a></h2>
<p>One can also lean on various plotting themes as shown below. These themes mimic the style of graphics popularized by some data visualization experts (for e.g., Stephen Few, Edward Tufte), news-media houses (Fivethirtyeight, The Economist, The Wall Street Journal), some software packages (Excel, Stata, Google docs), and a few others. Below I show you just a handful.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">ggthemes</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">theme_tufte</span><span class="p">()</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_37_0.png" src="../_images/Module05_37_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">theme_economist</span><span class="p">()</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_38_0.png" src="../_images/Module05_38_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">starwars</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">eye_color</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_bar</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">theme_fivethirtyeight</span><span class="p">()</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_39_0.png" src="../_images/Module05_39_0.png" />
</div>
</div>
<p>Later on you will learn these &amp; other ways to build advanced visualizations. For now we get to work more with <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code>.</p>
</div>
<div class="section" id="more-with-bar-charts">
<h2>More with bar-charts<a class="headerlink" href="#more-with-bar-charts" title="Permalink to this headline">¶</a></h2>
<p>I want to show a few things with bar-charts now. First, we can specify things a bit differently without altering the result. For example, compare the following two pieces of code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">movies</span><span class="p">,</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mpaa</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_41_0.png" src="../_images/Module05_41_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">movies</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">mpaa</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_42_0.png" src="../_images/Module05_42_0.png" />
</div>
</div>
<p>Notice that we switched the <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span></code> and the <code class="docutils literal notranslate"><span class="pre">aes()</span></code> pieces of the code but that made no difference; this is important to bear in mind because it will come in handy down the road when we need to build some advanced visualizations.</p>
<p>The plot is sub-optimal since MPAA ratings are missing for a lot of movies and should be  eliminated from the plot via <code class="docutils literal notranslate"><span class="pre">subset(mpa</span> <span class="pre">!=</span> <span class="pre">&quot;&quot;)</span></code>  or by running dplyr’s <code class="docutils literal notranslate"><span class="pre">filter()</span></code>  to create another data-set. I will lean on <code class="docutils literal notranslate"><span class="pre">filter()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">movies</span> <span class="o">%&gt;%</span> 
  <span class="nf">filter</span><span class="p">(</span><span class="n">mpaa</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">movies2</span> 

<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">movies2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">mpaa</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_44_0.png" src="../_images/Module05_44_0.png" />
</div>
</div>
<p>The order of the bars here is fortuitous in that it goes from the smallest frequency to the highest frequency, drawing the reader’s eye. I said fortuitous because <code class="docutils literal notranslate"><span class="pre">{ggplot2}</span></code> defaults to drawing the bars in an ascending alphabetic/alphanumeric order if the variable is a <strong>character</strong>. See below for an example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="nf">tibble</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="nf">rep</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="m">4</span><span class="p">),</span> <span class="nf">rep</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">)))</span>

<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span> 
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">)</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_46_0.png" src="../_images/Module05_46_0.png" />
</div>
</div>
<p>Notice the bars here do not follow in ascending/descending order of frequencies. Later on we’ll learn how to order the bars with ascending/descending frequencies or by some other logic.</p>
<p>What about plotting <code class="docutils literal notranslate"><span class="pre">relative</span> <span class="pre">frequencies</span></code> on the y-axis rather than the frequencies?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">movies2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">mpaa</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">..count..</span><span class="p">)</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">..count..</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">percent</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;MPAA Rating&quot;</span><span class="p">,</span>
    <span class="n">y</span>  <span class="o">=</span> <span class="s">&quot;Relative Frequency (%)&quot;</span>
    <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘scales’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following object is masked from ‘package:purrr’:

    discard
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following object is masked from ‘package:readr’:

    col_factor
</pre></div>
</div>
<img alt="../_images/Module05_48_3.png" src="../_images/Module05_48_3.png" />
</div>
</div>
<p>Note the addition of</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">(..count..)/sum(..count..)</span></code> to change the y-axis to reflect the relative frequency as a proportion, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_y_continuous(labels</span> <span class="pre">=</span> <span class="pre">percent)</span></code> to then multiply these proportions by 100 to get percentages as the labels rather than 0.2, 0.4, 0.6, etc.</p></li>
</ul>
</div>
<div class="section" id="disaggregating-bar-charts-for-groups">
<h2>Disaggregating bar-charts for groups<a class="headerlink" href="#disaggregating-bar-charts-for-groups" title="Permalink to this headline">¶</a></h2>
<p>Let us build a simple bar-chart with the <code class="docutils literal notranslate"><span class="pre">hsb2</span></code> data we saw in Module 01. Here we first download it, label the values, save it, and then start charting it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">read.table</span><span class="p">(</span>
  <span class="s">&#39;https://stats.idre.ucla.edu/stat/data/hsb2.csv&#39;</span><span class="p">,</span>
  <span class="n">header</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
  <span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;,&quot;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span>

<span class="nf">factor</span><span class="p">(</span><span class="n">hsb2</span><span class="o">$</span><span class="n">female</span><span class="p">,</span>
       <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span>
       <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;Male&quot;</span><span class="p">,</span> <span class="s">&quot;Female&quot;</span><span class="p">)</span>
       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span><span class="o">$</span><span class="n">female</span> 

<span class="nf">factor</span><span class="p">(</span><span class="n">hsb2</span><span class="o">$</span><span class="n">race</span><span class="p">,</span>
       <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">),</span>
       <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;Hispanic&quot;</span><span class="p">,</span> <span class="s">&quot;Asian&quot;</span><span class="p">,</span> <span class="s">&quot;African American&quot;</span><span class="p">,</span> <span class="s">&quot;White&quot;</span><span class="p">)</span>
       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span><span class="o">$</span><span class="n">race</span>

<span class="nf">factor</span><span class="p">(</span><span class="n">hsb2</span><span class="o">$</span><span class="n">ses</span><span class="p">,</span>
       <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">),</span>
       <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;Low&quot;</span><span class="p">,</span> <span class="s">&quot;Middle&quot;</span><span class="p">,</span> <span class="s">&quot;High&quot;</span><span class="p">)</span>
       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span><span class="o">$</span><span class="n">ses</span>

<span class="nf">factor</span><span class="p">(</span><span class="n">hsb2</span><span class="o">$</span><span class="n">schtyp</span><span class="p">,</span>
       <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">),</span>
       <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;Public&quot;</span><span class="p">,</span> <span class="s">&quot;Private&quot;</span><span class="p">)</span>
       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span><span class="o">$</span><span class="n">schtyp</span>

<span class="nf">factor</span><span class="p">(</span><span class="n">hsb2</span><span class="o">$</span><span class="n">prog</span><span class="p">,</span>
       <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">),</span>
       <span class="n">labels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;General&quot;</span><span class="p">,</span> <span class="s">&quot;Academic&quot;</span><span class="p">,</span> <span class="s">&quot;Vocational&quot;</span><span class="p">)</span>
       <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hsb2</span><span class="o">$</span><span class="n">prog</span>

<span class="nf">save</span><span class="p">(</span>
  <span class="n">hsb2</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">here</span><span class="o">::</span><span class="nf">here</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">,</span> <span class="s">&quot;hsb2.RData&quot;</span><span class="p">)</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">ses</span><span class="p">))</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_51_0.png" src="../_images/Module05_51_0.png" />
</div>
</div>
<p>Okay, fair enough. But what if I wanted to see how socioeconomic status varies across male and female students?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span>
      <span class="n">group</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span> 
      <span class="n">fill</span> <span class="o">=</span> <span class="n">female</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_53_0.png" src="../_images/Module05_53_0.png" />
</div>
</div>
<p>This is not very useful since the viewer has to estimate the relative sizes of the two colors within any given bar. That can be fixed with <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">&quot;dodge&quot;</span></code>, juxtaposing the bars for the groups as a result, and the end product is much better. But note: <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">&quot;dodge&quot;</span></code> has to be put outside the <code class="docutils literal notranslate"><span class="pre">aes()</span></code> but still inside <code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> so be careful.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span>
      <span class="n">group</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span> 
      <span class="n">fill</span> <span class="o">=</span> <span class="n">female</span>
      <span class="p">),</span>
    <span class="n">position</span> <span class="o">=</span> <span class="s">&quot;dodge&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_55_0.png" src="../_images/Module05_55_0.png" />
</div>
</div>
<p>What if you wanted to calculate percentages within each sex? That is, what percent of male students fall within a particular ses category, and the same thing for female students?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span> 
    <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span> 
      <span class="n">group</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span> 
      <span class="n">y</span> <span class="o">=</span> <span class="n">..prop..</span>
      <span class="p">),</span>
    <span class="n">position</span> <span class="o">=</span> <span class="s">&quot;dodge&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Relative Frequency (%)&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_57_0.png" src="../_images/Module05_57_0.png" />
</div>
</div>
<p>What about within each ses instead of within gender? That is, what if we wanted percent of Low ses that is Male versus Female, and so on?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span> 
    <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span> 
      <span class="n">group</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span> 
      <span class="n">y</span> <span class="o">=</span> <span class="n">..prop..</span>
      <span class="p">),</span>
    <span class="n">position</span> <span class="o">=</span> <span class="s">&quot;dodge&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Relative Frequency (%)&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_59_0.png" src="../_images/Module05_59_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_bar</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span> 
    <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">female</span><span class="p">,</span> 
      <span class="n">group</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">ses</span><span class="p">,</span> 
      <span class="n">y</span> <span class="o">=</span> <span class="n">..prop..</span>
      <span class="p">),</span>
    <span class="n">position</span> <span class="o">=</span> <span class="s">&quot;dodge&quot;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Socioeconomic Status&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Relative Frequency (%)&quot;</span>
    <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_60_0.png" src="../_images/Module05_60_0.png" />
</div>
</div>
<p>There is some more we will do with bar-charts but for now let us set them aside and instead look at a few other charts – histograms, box-plots, and line-charts.</p>
</div>
<div class="section" id="histograms">
<h2>Histograms<a class="headerlink" href="#histograms" title="Permalink to this headline">¶</a></h2>
<p>If you’ve forgotten what these are, see <a class="reference external" href="http://tinlizzie.org/histograms/">histogram</a>, or then <a class="reference external" href="https://flowingdata.com/2014/02/27/how-to-read-histograms-and-use-them-in-r/">Yau’s piece here</a> and <a class="reference external" href="https://flowingdata.com/2017/06/07/how-histograms-work/">here</a>. <a class="reference external" href="https://vimeo.com/221607341">There is a short video available as well</a>.</p>
<p>For histograms in ggplot2, <code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> is the geometry needed but note that the default number of bins is not very useful and can be tweaked, along with other embellishments that are possible as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</pre></div>
</div>
<img alt="../_images/Module05_62_1.png" src="../_images/Module05_62_1.png" />
</div>
</div>
<p>Note the warning <code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> using <code class="docutils literal notranslate"><span class="pre">bins</span> <span class="pre">=</span> <span class="pre">30</span></code>. Pick better value with <code class="docutils literal notranslate"><span class="pre">binwidth</span></code>. This is because numerical variables need to be grouped in order to have meaningful histograms we can make sense of. How do you define the bins (aka the groups)? We could set <code class="docutils literal notranslate"><span class="pre">bins</span> <span class="pre">=</span> <span class="pre">5</span></code> and we could also experiment with <code class="docutils literal notranslate"><span class="pre">binwidth</span> <span class="pre">=</span></code>. Let us do <code class="docutils literal notranslate"><span class="pre">bins</span> <span class="pre">=</span> <span class="pre">5</span></code> which will say give us 5 groups, and go ahead and calculate them yourself.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(with bins = )&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_64_0.png" src="../_images/Module05_64_0.png" />
</div>
</div>
<p>If we wanted more/fewer bins we could tweak it up or down as needed.
What about binwidth? This will specify how wide each group must be.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">binwidth</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(with binwidth = )&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_66_0.png" src="../_images/Module05_66_0.png" />
</div>
</div>
<p>If we wanted to disaggregate the histogram by one or more categorical variables, we could do so quite easily:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(broken out for Male vs. Female students)&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">female</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_68_0.png" src="../_images/Module05_68_0.png" />
</div>
</div>
<p>When we do this, it is often useful to organize them so that only one histogram shows up in a row. This is done with the <code class="docutils literal notranslate"><span class="pre">ncol</span> <span class="pre">=</span> <span class="pre">1</span></code> command.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(broken out for Male vs. Female students)&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">female</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_70_0.png" src="../_images/Module05_70_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(broken out by Socioeconomic Status)&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">ses</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_71_0.png" src="../_images/Module05_71_0.png" />
</div>
</div>
<p>Now the distributions are stacked above each, easing comparisons; do they have the same average? Do they vary the same? Are they similarly skewed/symmetric?.</p>
<p>For breakouts with two categorical variables we could do</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(broken out by Socioeconomic Status and School Type)&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="n">ses</span> <span class="o">~</span> <span class="n">schtyp</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_73_0.png" src="../_images/Module05_73_0.png" />
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ses</span> <span class="pre">~</span> <span class="pre">schtyp</span></code> renders the panels for the first category of <code class="docutils literal notranslate"><span class="pre">ses</span></code> by all categories of schtyp and then repeats for the other categories in rows 2 and 3. If we did <code class="docutils literal notranslate"><span class="pre">facet_wrap(schtype</span> <span class="pre">~</span> <span class="pre">ses,</span> <span class="pre">ncol</span> <span class="pre">=</span> <span class="pre">3)</span></code> we would have a different result:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_histogram</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">read</span><span class="p">),</span> 
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="m">5</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Histogram of Reading Scores&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(broken out by Socioeconomic Status and School Type)&quot;</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Reading Score&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Frequency&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="n">schtyp</span> <span class="o">~</span> <span class="n">ses</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">ylim</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">23</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Removed 1 rows containing missing values (geom_bar).”
</pre></div>
</div>
<img alt="../_images/Module05_75_1.png" src="../_images/Module05_75_1.png" />
</div>
</div>
<p>Notice that here I also add a <code class="docutils literal notranslate"><span class="pre">ylim(c(...))</span></code> command to set the minimum and maximum values of the y-axis. This is useful, and I suggest you do not forget to set the y limit to start at 0 or then make a note in the plot for readers so they don’t assume it is at 0 when in fact it has been truncated for ease of data presentation. This misstates the pattern in the data, do not do it or then, again, annotate the plot to that effect so nobody is misled. Bar-charts and histograms will have 0 as the minimum y-limit but this is not true for some other plots.</p>
</div>
<div class="section" id="box-plots">
<h2>Box-plots<a class="headerlink" href="#box-plots" title="Permalink to this headline">¶</a></h2>
<p>Remember these, our friends from MPA 6010? These can be useful for studying the distribution of a continuous variable. <a class="reference external" href="https://vimeo.com/222358034">See this video</a>. Let us see these in action with the <code class="docutils literal notranslate"><span class="pre">cmhflights</span></code> data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">load</span><span class="p">(</span>
  <span class="n">here</span><span class="o">::</span><span class="nf">here</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">,</span> <span class="s">&quot;cmhflights_01092017.RData&quot;</span><span class="p">)</span>
  <span class="p">)</span>

<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_boxplot</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cmhflights</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">ArrDelay</span><span class="p">,</span>
      <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
      <span class="p">),</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span>
    <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Removed 565 rows containing non-finite values (stat_boxplot).”
</pre></div>
</div>
<img alt="../_images/Module05_78_1.png" src="../_images/Module05_78_1.png" />
</div>
</div>
<p>Note:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span></code> is in <code class="docutils literal notranslate"><span class="pre">aes()</span></code> because otherwise with a single group the box-plot will not build up nicely</p></li>
</ul>
<p>But, I prefer to see them running horizontally, so how can I do that? With <code class="docutils literal notranslate"><span class="pre">coord_flip()</span></code> since this just flips the columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_boxplot</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cmhflights</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">ArrDelay</span><span class="p">,</span>
      <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
      <span class="p">),</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">coord_flip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Removed 565 rows containing non-finite values (stat_boxplot).”
</pre></div>
</div>
<img alt="../_images/Module05_80_1.png" src="../_images/Module05_80_1.png" />
</div>
</div>
<p>And now for a slightly different data-set, one that measures male adults’ hemoglobin concentration for a few populations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">read_csv</span><span class="p">(</span>
  <span class="s">&quot;http://whitlockschluter.zoology.ubc.ca/wp-content/data/chapter02/chap02e3cHumanHemoglobinElevation.csv&quot;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">hemoglobin</span>

<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">geom_boxplot</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hemoglobin</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">population</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">hemoglobin</span><span class="p">,</span>
      <span class="n">fill</span> <span class="o">=</span> <span class="n">population</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">coord_flip</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Population&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Hemoglobin Concentration&quot;</span><span class="p">,</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Hemoglobin Concentration in Adult Males&quot;</span><span class="p">,</span>
    <span class="n">subtitle</span> <span class="o">=</span> <span class="s">&quot;(Andes, Ethiopia, Tibet, USA)&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">1962</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">3</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (2): id, population
<span class=" -Color -Color-Green">dbl</span> (1): hemoglobin
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use <span class=" -Color -Color-Black -Color-Black-BGWhite">`spec()`</span> to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set <span class=" -Color -Color-Black -Color-Black-BGWhite">`show_col_types = FALSE`</span> to quiet this message.
</pre></div>
</div>
<img alt="../_images/Module05_82_3.png" src="../_images/Module05_82_3.png" />
</div>
</div>
<p>Notice the need for no legend with <code class="docutils literal notranslate"><span class="pre">fill</span> <span class="pre">=</span> <span class="pre">population</span></code> Notice also how <code class="docutils literal notranslate"><span class="pre">fill</span> <span class="pre">=</span> </code> is inside <code class="docutils literal notranslate"><span class="pre">aes(...)</span></code> here because we are asking that each unique value seen in a variable called <code class="docutils literal notranslate"><span class="pre">population</span></code> be mapped to a unique color.</p>
<p>Could we use our <code class="docutils literal notranslate"><span class="pre">facet_wrap(...)</span></code> here too? Of course.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_boxplot</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cmhflights</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">ArrDelay</span><span class="p">,</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">Carrier</span>
      <span class="p">),</span>
    <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;cornflowerblue&quot;</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">coord_flip</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">Month</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Removed 565 rows containing non-finite values (stat_boxplot).”
</pre></div>
</div>
<img alt="../_images/Module05_84_1.png" src="../_images/Module05_84_1.png" />
</div>
</div>
</div>
<div class="section" id="line-charts">
<h2>Line-charts<a class="headerlink" href="#line-charts" title="Permalink to this headline">¶</a></h2>
<p>If we have data over time for one or more units, then line-charts work really well to exhibit trends. A classic, current example would be the number of confirmed COVID-19 cases per country per date. For example, say we have data on the unemployment rate for the country. These data are coming from the <code class="docutils literal notranslate"><span class="pre">{plotly}</span></code> library so we have to make sure it is installed and load it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span>
<span class="nf">data</span><span class="p">(</span><span class="n">economics</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">economics</span><span class="p">)</span>
<span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">geom_line</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">economics</span><span class="p">,</span> 
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">date</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">uempmed</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Unemployment Rate&quot;</span>
  <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘plotly’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following object is masked from ‘package:ggplot2’:

    last_plot
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following object is masked from ‘package:stats’:

    filter
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following object is masked from ‘package:graphics’:

    layout
</pre></div>
</div>
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'date'</li><li>'pce'</li><li>'pop'</li><li>'psavert'</li><li>'uempmed'</li><li>'unemploy'</li></ol>
</div><img alt="../_images/Module05_86_5.png" src="../_images/Module05_86_5.png" />
</div>
</div>
<p>They can look very plain and aesthetically unappealing unless you dress them up. See the one below and then the one that follows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">load</span><span class="p">(</span>
  <span class="n">here</span><span class="o">::</span><span class="nf">here</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">,</span> <span class="s">&quot;gap.df.RData&quot;</span><span class="p">)</span>
  <span class="p">)</span>

<span class="n">gap.df</span> <span class="o">%&gt;%</span>
    <span class="nf">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span>
    <span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
    <span class="nf">geom_line</span><span class="p">(</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">year</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">LifeExp</span><span class="p">,</span>
      <span class="n">group</span> <span class="o">=</span> <span class="n">continent</span><span class="p">,</span>
      <span class="n">color</span> <span class="o">=</span> <span class="n">continent</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">year</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">LifeExp</span><span class="p">,</span>
      <span class="n">group</span> <span class="o">=</span> <span class="n">continent</span><span class="p">,</span>
      <span class="n">color</span> <span class="o">=</span> <span class="n">continent</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Year&quot;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Median Life Expectancy (in years)&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
  <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_88_0.png" src="../_images/Module05_88_0.png" />
</div>
</div>
</div>
<div class="section" id="scatter-plots">
<h2>Scatter-plots<a class="headerlink" href="#scatter-plots" title="Permalink to this headline">¶</a></h2>
<p>These work well if we have two or more continuous variables, and work well to highlight the nature and strength of a relationship between the two variables … what happens to <code class="docutils literal notranslate"><span class="pre">y</span></code> as <code class="docutils literal notranslate"><span class="pre">x</span></code> increases? s</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span> 
  <span class="nf">geom_point</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span> 
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">write</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">science</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span>
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Writing Scores&quot;</span><span class="p">,</span> 
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Science Scores&quot;</span>
    <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_90_0.png" src="../_images/Module05_90_0.png" />
</div>
</div>
<p>We could highlight the different <code class="docutils literal notranslate"><span class="pre">ses</span></code> groups, to see if there is any difference in the relationship between writing scores and science scores by the different ses levels.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">write</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">science</span><span class="p">,</span>
      <span class="n">color</span> <span class="o">=</span> <span class="n">ses</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Writing Scores&quot;</span><span class="p">,</span> 
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Science Scores&quot;</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_92_0.png" src="../_images/Module05_92_0.png" />
</div>
</div>
<p>This is not very helpful so why not breakout ses for ease of interpretation?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">write</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">science</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Writing Scores&quot;</span><span class="p">,</span> 
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Science Scores&quot;</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="o">~</span> <span class="n">ses</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_94_0.png" src="../_images/Module05_94_0.png" />
</div>
</div>
<p>Could we add another layer, perhaps <code class="docutils literal notranslate"><span class="pre">female</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">()</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">hsb2</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nf">aes</span><span class="p">(</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">write</span><span class="p">,</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">science</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">labs</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s">&quot;Writing Scores&quot;</span><span class="p">,</span> 
    <span class="n">y</span> <span class="o">=</span> <span class="s">&quot;Science Scores&quot;</span>
    <span class="p">)</span> <span class="o">+</span> 
  <span class="nf">facet_wrap</span><span class="p">(</span><span class="n">ses</span> <span class="o">~</span> <span class="n">female</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Module05_96_0.png" src="../_images/Module05_96_0.png" />
</div>
</div>
<p>And finally, a few suggestion about how to build up your visualizations:</p>
<ul class="simple">
<li><p>start with pencil and paper, sketch prototypes of desired visualization(s)</p></li>
<li><p>graphics are relatively easy to generate with base R &amp; with <code class="docutils literal notranslate"><span class="pre">ggplot2</span></code></p></li>
<li><p>common-sense: <code class="docutils literal notranslate"><span class="pre">number</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">type</span></code> of variable(s) guide plotting</p></li>
<li><p>stay <code class="docutils literal notranslate"><span class="pre">color</span> <span class="pre">conscious</span></code>: sensible colors &amp; sensitive to color blindness</p></li>
<li><p>experiment, experiment, experiment until you are happy</p></li>
<li><p>learning resources available online</p></li>
<li><p>if you learn something new in R, write it down</p></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="tex2jax_ignore mathjax_ignore section" id="exercises-for-practice">
<h1>Exercises for Practice<a class="headerlink" href="#exercises-for-practice" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-01-nobel-prize-winners">
<h2>Exercise 01 – Nobel Prize Winners<a class="headerlink" href="#exercise-01-nobel-prize-winners" title="Permalink to this headline">¶</a></h2>
<p>Georgios Karamanis gathered and shared data on Nobel prize winners over the years, with a fair amount of detail, and used in the <code class="docutils literal notranslate"><span class="pre">tidytuesday</span></code> series a while back. These data are to be used for the questions that follow.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">readr</span><span class="o">::</span><span class="nf">read_csv</span><span class="p">(</span>
    <span class="s">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-05-14/nobel_winners.csv&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nobel_winners</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">969</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">18</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span>  (14): category, prize, motivation, prize_share, laureate_type, full_nam...
<span class=" -Color -Color-Green">dbl</span>   (2): prize_year, laureate_id
<span class=" -Color -Color-Blue">date</span>  (2): birth_date, death_date
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use <span class=" -Color -Color-Black -Color-Black-BGWhite">`spec()`</span> to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set <span class=" -Color -Color-Black -Color-Black-BGWhite">`show_col_types = FALSE`</span> to quiet this message.
</pre></div>
</div>
</div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>variable</p></th>
<th class="text-align:left head"><p>class</p></th>
<th class="text-align:left head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>prize_year</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Year that Nobel Prize was awarded</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>category</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Field of study/category</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>prize</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Prize Name</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>motivation</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Motivation of the award</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>prize_share</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Share eg 1 of 1, 1 of 2, 1 of 4, etc</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>laureate_id</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>ID assigned to each winner</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>laureate_type</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Individual or organization</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>full_name</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>name of the winner</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>birth_date</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>birth date of winner</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>birth_city</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>birth city/state of winner</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>birth_country</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>birth country of winner</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>gender</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>binary gender of the winner</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>organization_name</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>organization name</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>organization_city</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>organization city</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>organization_country</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>organization country</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>death_date</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>death date of the winner (if dead)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>death_city</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>death city (if dead)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>death_country</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>death country (if dead)</p></td>
</tr>
</tbody>
</table>
<p>(a) First create <code class="docutils literal notranslate"><span class="pre">nobel.df</span></code> that keeps only records starting in the year 1960, and only for the “Physics” category. Now generate an appropriate chart that shows the distribution of winners by <code class="docutils literal notranslate"><span class="pre">birth_country</span></code></p>
<p>(b) Now break this distribution out by <code class="docutils literal notranslate"><span class="pre">gender</span></code> to see how winners by country differs across gender</p>
<p>© Now go back to <code class="docutils literal notranslate"><span class="pre">noble_winners</span></code>, the full data-set, and create a simple plot that shows the distribution of prize winners by <code class="docutils literal notranslate"><span class="pre">death_country</span></code>, <code class="docutils literal notranslate"><span class="pre">gender</span></code>, and <code class="docutils literal notranslate"><span class="pre">category</span></code></p>
</div>
<div class="section" id="exercise-02-water-levels-in-the-great-lakes">
<h2>Exercise 02 – Water levels in the Great Lakes<a class="headerlink" href="#exercise-02-water-levels-in-the-great-lakes" title="Permalink to this headline">¶</a></h2>
<p>Download the monthly Great Lakes water level data-set <a class="reference external" href="https://aniruhil.github.io/avsr/teaching/dataviz/greatlakes.sav">SPSS format from here</a> and <a class="reference external" href="https://aniruhil.github.io/avsr/teaching/dataviz/greatlakes.xlsx">Excel format from here</a>. <em>Note that water level is in meters.</em></p>
<p>You may use the following command to read in the excel file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span>
<span class="n">url</span> <span class="o">&lt;-</span> <span class="s">&quot;https://aniruhil.github.io/avsr/teaching/dataviz/greatlakes.xlsx&quot;</span>
<span class="n">destfile</span> <span class="o">&lt;-</span> <span class="s">&quot;greatlakes.xlsx&quot;</span>
<span class="n">curl</span><span class="o">::</span><span class="nf">curl_download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">destfile</span><span class="p">)</span>
<span class="nf">read_excel</span><span class="p">(</span><span class="n">destfile</span><span class="p">,</span> <span class="n">col_types</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;date&quot;</span><span class="p">,</span> 
     <span class="s">&quot;numeric&quot;</span><span class="p">,</span> <span class="s">&quot;numeric&quot;</span><span class="p">,</span> <span class="s">&quot;numeric&quot;</span><span class="p">,</span> <span class="s">&quot;numeric&quot;</span><span class="p">,</span> 
     <span class="s">&quot;numeric&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">greatlakes</span> 

<span class="n">greatlakes</span> <span class="o">%&gt;%</span>
    <span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>monthyear</th><th scope=col>Superior</th><th scope=col>MichiganHuron</th><th scope=col>St.Clair</th><th scope=col>Erie</th><th scope=col>Ontario</th></tr>
	<tr><th scope=col>&lt;dttm&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1918-01-01</td><td>183.25</td><td>176.71</td><td>174.59</td><td>173.90</td><td>74.74</td></tr>
	<tr><td>1918-02-01</td><td>183.20</td><td>176.73</td><td>174.74</td><td>173.82</td><td>74.72</td></tr>
	<tr><td>1918-03-01</td><td>183.17</td><td>176.80</td><td>174.74</td><td>174.01</td><td>74.92</td></tr>
	<tr><td>1918-04-01</td><td>183.14</td><td>176.89</td><td>174.84</td><td>174.02</td><td>75.10</td></tr>
	<tr><td>1918-05-01</td><td>183.22</td><td>176.99</td><td>175.00</td><td>173.98</td><td>75.09</td></tr>
	<tr><td>1918-06-01</td><td>183.34</td><td>177.07</td><td>175.14</td><td>174.10</td><td>75.06</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Now use an appropriate chart to show the water level for Lake Superior.</p>
</div>
<div class="section" id="exercise-03-county-health-rankings">
<h2>Exercise 03 – County Health Rankings<a class="headerlink" href="#exercise-03-county-health-rankings" title="Permalink to this headline">¶</a></h2>
<p>Download the 2017 County Health Rankings data <a class="reference external" href="https://aniruhil.github.io/avsr/teaching/dataviz/CountyHealthRankings2017.sav">SPSS format from here</a>, <a class="reference external" href="https://aniruhil.github.io/avsr/teaching/dataviz/CountyHealthRankings2017.xlsx">Excel format from here</a> and the <a class="reference external" href="http://www.countyhealthrankings.org/sites/default/files/2017TrendsDocumentation.pdf">accompanying codebook</a>.</p>
<p>These data can also be downloaded with the code provided below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span>
<span class="n">url</span> <span class="o">&lt;-</span> <span class="s">&quot;https://aniruhil.github.io/avsr/teaching/dataviz/CountyHealthRankings2017.xlsx&quot;</span>
<span class="n">destfile</span> <span class="o">&lt;-</span> <span class="s">&quot;CountyHealthRankings2017.xlsx&quot;</span>
<span class="n">curl</span><span class="o">::</span><span class="nf">curl_download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">destfile</span><span class="p">)</span>
<span class="nf">read_excel</span><span class="p">(</span><span class="n">destfile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">chr.df</span> 

<span class="n">chr.df</span> <span class="o">%&gt;%</span>
    <span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 8</caption>
<thead>
	<tr><th scope=col>state</th><th scope=col>Adult_obesity</th><th scope=col>Children_in_poverty</th><th scope=col>Diabetes_monitoring</th><th scope=col>High_school_graduation</th><th scope=col>Premature_death</th><th scope=col>Preventable_hospital_stays</th><th scope=col>Unemployment_rate</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>AK</td><td>0.29</td><td>0.15</td><td>0.75</td><td>0.76</td><td>7403.4</td><td>35.99</td><td>0.06</td></tr>
	<tr><td>AL</td><td>0.34</td><td>0.27</td><td>0.85</td><td>0.89</td><td>9573.2</td><td>61.13</td><td>0.06</td></tr>
	<tr><td>AR</td><td>0.34</td><td>0.26</td><td>0.84</td><td>0.85</td><td>9150.7</td><td>61.95</td><td>0.05</td></tr>
	<tr><td>AZ</td><td>0.26</td><td>0.25</td><td>0.80</td><td>0.78</td><td>6787.7</td><td>36.97</td><td>0.06</td></tr>
	<tr><td>CA</td><td>0.23</td><td>0.21</td><td>0.82</td><td>  NA</td><td>5213.2</td><td>35.74</td><td>0.06</td></tr>
	<tr><td>CO</td><td>0.20</td><td>0.15</td><td>0.84</td><td>0.77</td><td>5711.5</td><td>32.09</td><td>0.04</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Construct appropriate plots that shows the relationship between the following pairs of variables</p>
<p>(a) Adult obesity and High school graduation</p>
<p>(b) Children in poverty and High school graduation</p>
<p>© Preventable hospital stays and Unemployment rate</p>
</div>
<div class="section" id="exercise-04-unemployment-rates">
<h2>Exercise 04 – Unemployment Rates<a class="headerlink" href="#exercise-04-unemployment-rates" title="Permalink to this headline">¶</a></h2>
<p>Use the unemployment data given to you <code class="docutils literal notranslate"><span class="pre">(unemprate.RData)</span></code> and construct appropriate plots that show the distribution of unemployment rates across years for each of the four educational attainment groups.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">load</span><span class="p">(</span><span class="s">&quot;data/unemprate.RData&quot;</span><span class="p">)</span>

<span class="n">urate</span> <span class="o">%&gt;%</span>
    <span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>yearmonth</th><th scope=col>educ_group</th><th scope=col>rate</th></tr>
	<tr><th scope=col>&lt;date&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2007-04-01</td><td>BA_or_more</td><td>1.9</td></tr>
	<tr><td>2007-08-01</td><td>BA_or_more</td><td>2.1</td></tr>
	<tr><td>2007-12-01</td><td>BA_or_more</td><td>2.1</td></tr>
	<tr><td>2007-02-01</td><td>BA_or_more</td><td>1.9</td></tr>
	<tr><td>2007-01-01</td><td>BA_or_more</td><td>2.1</td></tr>
	<tr><td>2007-07-01</td><td>BA_or_more</td><td>2.1</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Be sure to use a unique color for each educational attainment group</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "aniruhil/jb5830-repo",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            kernelName: "ir",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

              </div>
              
            
                



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="Module04.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Managing dates and Times with {lubridate}</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="Module06.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Advanced Data Visualization</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Ani Ruhil<br/>
    
        &copy; Copyright 2022.<br/>
      <div class="extra_footer">
        Fall 2021
      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>