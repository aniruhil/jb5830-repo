
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Managing dates and Times with {lubridate} &#8212; Data Analytics with R (MPA 5830)</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://aniruhil.github.io/jb530-repo/index.html/docs/Module04.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualizing Data with {ggplot2}" href="Module05.html" />
    <link rel="prev" title="Rearranging Data with {tidyr}" href="Module03.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo5830.svg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Analytics with R (MPA 5830)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Intro.html">
   Introduction to MPA 5830
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reading Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Module01.html">
   Reading data in R
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Cleaning &amp; Organizng Data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Module02.html">
   Cleaning Data with {dplyr}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Module03.html">
   Rearranging Data with {tidyr}
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Managing dates and Times with {lubridate}
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Visualizing Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Module05.html">
   Visualizing Data with {ggplot2}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Module06.html">
   Advanced Data Visualization
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/docs/Module04.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/aniruhil/jb5830-repo"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/aniruhil/jb5830-repo/issues/new?title=Issue%20on%20page%20%2Fdocs/Module04.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/aniruhil/jb5830-repo/main?urlpath=tree/docs/docs/Module04.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Managing dates and Times with {lubridate}
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lubridate">
     {lubridate}
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#working-with-flight-dates">
       Working with flight dates
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#now-let-us-ask-some-questions">
         Now let us ask some questions:
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#passage-of-time">
       Passage of Time
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises-for-practice">
   Exercises for Practice
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-01">
     Exercise 01
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#problem-a">
       Problem (a)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#problem-b">
       Problem (b)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#problem-c">
       Problem (c)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#problem-d">
       Problem (d)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#problem-e">
       Problem (e)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-02">
     Exercise 02
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Problem (a)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Problem (b)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Problem (c)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="managing-dates-and-times-with-lubridate">
<h1>Managing dates and Times with {lubridate}<a class="headerlink" href="#managing-dates-and-times-with-lubridate" title="Permalink to this headline">¶</a></h1>
<div class="section" id="lubridate">
<h2>{lubridate}<a class="headerlink" href="#lubridate" title="Permalink to this headline">¶</a></h2>
<p>Working with dates and times is not as simple as it looks, and the reasons are as many as they are diverse. Let us spell out a few of the major ones.</p>
<p>For one, dates come in all shapes and sizes, as text that looks like this: “Monday, Jan10, 2010” to strings like “2020-28-01 12:49” but no matter what software you use, you have to be able to convert all dates into a standard format.</p>
<p>Second, if you need to calculate how much time has passed between events, for example, how many days go by before a patient returns to the Emergency Room (ER), how many days between Covid-19 deaths in an infected population, hours needed to fly from Columbus to an Francisco, and so on … you need to be able to move between months, days, hours, etc with ease, AND calculate the length of time in a way that automatically adjusts for <code class="docutils literal notranslate"><span class="pre">leap</span></code> years.</p>
<p>There are many more reasons I could advance but we might as well start working with dates. First up, some mangled date entries and we’ll see how to parse them into correct date formats! We will rely on the <code class="docutils literal notranslate"><span class="pre">lubridate</span></code> package to do this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;20171217&quot;</span> <span class="o">-&gt;</span> <span class="n">today1</span> 
<span class="s">&quot;2017-12-17&quot;</span> <span class="o">-&gt;</span> <span class="n">today2</span> 
<span class="s">&quot;2017 December 17&quot;</span> <span class="o">-&gt;</span> <span class="n">today3</span> 
<span class="s">&quot;20171217143241&quot;</span> <span class="o">-&gt;</span> <span class="n">today4</span> 
<span class="s">&quot;2017 December 17 14:32:41&quot;</span> <span class="o">-&gt;</span> <span class="n">today5</span> 
<span class="s">&quot;December 17 2017 14:32:41&quot;</span> <span class="o">-&gt;</span> <span class="n">today6</span> 
<span class="s">&quot;17-Dec, 2017 14:32:41&quot;</span> <span class="o">-&gt;</span> <span class="n">today7</span> 
</pre></div>
</div>
</div>
</div>
<p>Now we fix them up!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Attaching packages</span> ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.1 ──
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">ggplot2</span> 3.3.5     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">purrr  </span> 0.3.4
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tibble </span> 3.1.6     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">dplyr  </span> 1.0.7
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tidyr  </span> 1.1.4     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">stringr</span> 1.4.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">readr  </span> 2.1.1     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">forcats</span> 0.5.1
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Conflicts</span> ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">filter()</span> masks <span class=" -Color -Color-Blue">stats</span>::filter()
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">lag()</span>    masks <span class=" -Color -Color-Blue">stats</span>::lag()
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘lubridate’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following objects are masked from ‘package:base’:

    date, intersect, setdiff, union
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ymd</span><span class="p">(</span><span class="n">today1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date1</span>
<span class="nf">ymd</span><span class="p">(</span><span class="n">today2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date2</span> 
<span class="nf">ymd</span><span class="p">(</span><span class="n">today3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date3</span> 

<span class="n">date1</span><span class="p">;</span> <span class="n">date2</span><span class="p">;</span> <span class="n">date3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2017-12-17">2017-12-17</time></div><div class="output text_html"><time datetime="2017-12-17">2017-12-17</time></div><div class="output text_html"><time datetime="2017-12-17">2017-12-17</time></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">today1</span></code>, <code class="docutils literal notranslate"><span class="pre">today2</span></code>, and <code class="docutils literal notranslate"><span class="pre">today3</span></code> all had the same structure of year-month-day and so <code class="docutils literal notranslate"><span class="pre">ymd()</span></code> works to get the format right.</p>
<p><code class="docutils literal notranslate"><span class="pre">today4</span></code> has year-month-day-hours-minutes-seconds so we’ll have to do this one slightly differently. The same thing works for <code class="docutils literal notranslate"><span class="pre">today5</span></code> as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ymd_hms</span><span class="p">(</span><span class="n">today4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date4</span> 
<span class="nf">ymd_hms</span><span class="p">(</span><span class="n">today5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date5</span> 

<span class="n">date4</span><span class="p">;</span> <span class="n">date5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-12-17 14:32:41 UTC&quot;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-12-17 14:32:41 UTC&quot;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">today6</span></code> has a slightly different format, <code class="docutils literal notranslate"><span class="pre">month-day-year-hours-minutes-seconds</span></code> that is read in thus:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">mdy_hms</span><span class="p">(</span><span class="n">today6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date6</span> 

<span class="n">date6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-12-17 14:32:41 UTC&quot;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">today7</span></code> has a slightly different format, <code class="docutils literal notranslate"><span class="pre">day-month-year-hours-minutes-seconds</span></code> that is read in thus:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dmy_hms</span><span class="p">(</span><span class="n">today7</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date7</span> 

<span class="n">date7</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-12-17 14:32:41 UTC&quot;
</pre></div>
</div>
</div>
</div>
<p>Notice how regardless of the format pf the raw data, merely invoking the correct sequence of ymd, mdy, dmy, etc flips the raw date into properly formatted date.</p>
<div class="section" id="working-with-flight-dates">
<h3>Working with flight dates<a class="headerlink" href="#working-with-flight-dates" title="Permalink to this headline">¶</a></h3>
<p>Now we should be able to start working with some date variables, and the ideal candidate would be the flight date column in our <code class="docutils literal notranslate"><span class="pre">cmhflights</span></code> data. So the first thing we will do is load that data-set so that we can work with it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">load</span><span class="p">(</span><span class="s">&quot;data/cmhflights_01092017.RData&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">names</span><span class="p">(</span><span class="n">cmhflights</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Year'</li><li>'Quarter'</li><li>'Month'</li><li>'DayofMonth'</li><li>'DayOfWeek'</li><li>'FlightDate'</li><li>'UniqueCarrier'</li><li>'AirlineID'</li><li>'Carrier'</li><li>'TailNum'</li><li>'FlightNum'</li><li>'OriginAirportID'</li><li>'OriginAirportSeqID'</li><li>'OriginCityMarketID'</li><li>'Origin'</li><li>'OriginCityName'</li><li>'OriginState'</li><li>'OriginStateFips'</li><li>'OriginStateName'</li><li>'OriginWac'</li><li>'DestAirportID'</li><li>'DestAirportSeqID'</li><li>'DestCityMarketID'</li><li>'Dest'</li><li>'DestCityName'</li><li>'DestState'</li><li>'DestStateFips'</li><li>'DestStateName'</li><li>'DestWac'</li><li>'CRSDepTime'</li><li>'DepTime'</li><li>'DepDelay'</li><li>'DepDelayMinutes'</li><li>'DepDel15'</li><li>'DepartureDelayGroups'</li><li>'DepTimeBlk'</li><li>'TaxiOut'</li><li>'WheelsOff'</li><li>'WheelsOn'</li><li>'TaxiIn'</li><li>'CRSArrTime'</li><li>'ArrTime'</li><li>'ArrDelay'</li><li>'ArrDelayMinutes'</li><li>'ArrDel15'</li><li>'ArrivalDelayGroups'</li><li>'ArrTimeBlk'</li><li>'Cancelled'</li><li>'CancellationCode'</li><li>'Diverted'</li><li>'CRSElapsedTime'</li><li>'ActualElapsedTime'</li><li>'AirTime'</li><li>'Flights'</li><li>'Distance'</li><li>'DistanceGroup'</li><li>'CarrierDelay'</li><li>'WeatherDelay'</li><li>'NASDelay'</li><li>'SecurityDelay'</li><li>'LateAircraftDelay'</li><li>'FirstDepTime'</li><li>'TotalAddGTime'</li><li>'LongestAddGTime'</li><li>'DivAirportLandings'</li><li>'DivReachedDest'</li><li>'DivActualElapsedTime'</li><li>'DivArrDelay'</li><li>'DivDistance'</li><li>'Div1Airport'</li><li>'Div1AirportID'</li><li>'Div1AirportSeqID'</li><li>'Div1WheelsOn'</li><li>'Div1TotalGTime'</li><li>'Div1LongestGTime'</li><li>'Div1WheelsOff'</li><li>'Div1TailNum'</li><li>'Div2Airport'</li><li>'Div2AirportID'</li><li>'Div2AirportSeqID'</li><li>'Div2WheelsOn'</li><li>'Div2TotalGTime'</li><li>'Div2LongestGTime'</li><li>'Div2WheelsOff'</li><li>'Div2TailNum'</li><li>'Div3Airport'</li><li>'Div3AirportID'</li><li>'Div3AirportSeqID'</li><li>'Div3WheelsOn'</li><li>'Div3TotalGTime'</li><li>'Div3LongestGTime'</li><li>'Div3WheelsOff'</li><li>'Div3TailNum'</li><li>'Div4Airport'</li><li>'Div4AirportID'</li><li>'Div4AirportSeqID'</li><li>'Div4WheelsOn'</li><li>'Div4TotalGTime'</li><li>'Div4LongestGTime'</li><li>'Div4WheelsOff'</li><li>'Div4TailNum'</li><li>'Div5Airport'</li><li>'Div5AirportID'</li><li>'Div5AirportSeqID'</li><li>'Div5WheelsOn'</li><li>'Div5TotalGTime'</li><li>'Div5LongestGTime'</li><li>'Div5WheelsOff'</li><li>'Div5TailNum'</li><li>'X110'</li></ol>
</div></div>
</div>
<p>I dislike the uppercase-lowercase mixture they have in their column names and so will get rid of it as shown below, making everything nice and lowercase. This is done with the <code class="docutils literal notranslate"><span class="pre">janitor</span></code> package’s <code class="docutils literal notranslate"><span class="pre">clean_names()</span></code> command.</p>
<p>I am also going to use <code class="docutils literal notranslate"><span class="pre">select()</span></code> to keep only a handful of columns since keeping 100+ is of no value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">janitor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘janitor’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following objects are masked from ‘package:stats’:

    chisq.test, fisher.test
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmhflights</span> <span class="o">%&gt;%</span>
  <span class="nf">clean_names</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span>
    <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">dayof_month</span><span class="p">,</span> <span class="n">day_of_week</span><span class="p">,</span> <span class="n">flight_date</span><span class="p">,</span> <span class="n">carrier</span><span class="p">,</span>
    <span class="n">tail_num</span><span class="p">,</span> <span class="n">flight_num</span><span class="p">,</span> <span class="n">origin_city_name</span><span class="p">,</span> <span class="n">dest_city_name</span><span class="p">,</span>
    <span class="n">dep_time</span><span class="p">,</span> <span class="n">dep_delay</span><span class="p">,</span> <span class="n">arr_time</span><span class="p">,</span> <span class="n">arr_delay</span><span class="p">,</span> <span class="n">cancelled</span><span class="p">,</span> <span class="n">diverted</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df</span>
</pre></div>
</div>
</div>
</div>
<p>The first thing I want to do now is to label the days of the week, the months, and then also create a flag for the <code class="docutils literal notranslate"><span class="pre">weekend</span></code> versus <code class="docutils literal notranslate"><span class="pre">weekdays</span></code>. Here goes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">dayofweek</span> <span class="o">=</span> <span class="nf">wday</span><span class="p">(</span>
      <span class="n">day_of_week</span><span class="p">,</span>
      <span class="n">abbr</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span>
      <span class="n">label</span> <span class="o">=</span> <span class="kc">TRUE</span>
      <span class="p">),</span>
    <span class="n">monthname</span> <span class="o">=</span> <span class="nf">month</span><span class="p">(</span>
      <span class="n">month</span><span class="p">,</span>
      <span class="n">abbr</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span>
      <span class="n">label</span> <span class="o">=</span> <span class="kc">TRUE</span>
      <span class="p">),</span>
    <span class="n">weekend</span> <span class="o">=</span> <span class="nf">case_when</span><span class="p">(</span>
      <span class="n">dayofweek</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;Saturday&quot;</span><span class="p">,</span> <span class="s">&quot;Sunday&quot;</span><span class="p">)</span> <span class="o">~</span> <span class="s">&quot;Weekend&quot;</span><span class="p">,</span>
      <span class="kc">TRUE</span> <span class="o">~</span> <span class="s">&quot;Weekday&quot;</span>
      <span class="p">)</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df</span> 
</pre></div>
</div>
</div>
</div>
<div class="section" id="now-let-us-ask-some-questions">
<h4>Now let us ask some questions:<a class="headerlink" href="#now-let-us-ask-some-questions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(a) What month had the most flights?  
(b) What day of the week had the most flights?  
(c) What about weekends; did weekends have more flights than weekdays?  
(d) With respect to (c), does whatever pattern we see vary by month, or does month not matter? 
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">monthname</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># (a)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 9 × 2</caption>
<thead>
	<tr><th scope=col>monthname</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;ord&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>July     </td><td>4295</td></tr>
	<tr><td>August   </td><td>4279</td></tr>
	<tr><td>June     </td><td>4138</td></tr>
	<tr><td>April    </td><td>4123</td></tr>
	<tr><td>March    </td><td>4101</td></tr>
	<tr><td>May      </td><td>4098</td></tr>
	<tr><td>September</td><td>3789</td></tr>
	<tr><td>January  </td><td>3757</td></tr>
	<tr><td>February </td><td>3413</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">dayofweek</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># (b) </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 7 × 2</caption>
<thead>
	<tr><th scope=col>dayofweek</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;ord&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Wednesday</td><td>5435</td></tr>
	<tr><td>Thursday </td><td>5417</td></tr>
	<tr><td>Sunday   </td><td>5395</td></tr>
	<tr><td>Tuesday  </td><td>5368</td></tr>
	<tr><td>Monday   </td><td>5284</td></tr>
	<tr><td>Saturday </td><td>4892</td></tr>
	<tr><td>Friday   </td><td>4202</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">weekend</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># (c) </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>weekend</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Weekday</td><td>25706</td></tr>
	<tr><td>Weekend</td><td>10287</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">monthname</span><span class="p">,</span> <span class="n">weekend</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># (d) </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 18 × 3</caption>
<thead>
	<tr><th scope=col>monthname</th><th scope=col>weekend</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;ord&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>August   </td><td>Weekday</td><td>3165</td></tr>
	<tr><td>March    </td><td>Weekday</td><td>3047</td></tr>
	<tr><td>June     </td><td>Weekday</td><td>3023</td></tr>
	<tr><td>July     </td><td>Weekday</td><td>2918</td></tr>
	<tr><td>May      </td><td>Weekday</td><td>2908</td></tr>
	<tr><td>April    </td><td>Weekday</td><td>2876</td></tr>
	<tr><td>September</td><td>Weekday</td><td>2760</td></tr>
	<tr><td>January  </td><td>Weekday</td><td>2557</td></tr>
	<tr><td>February </td><td>Weekday</td><td>2452</td></tr>
	<tr><td>July     </td><td>Weekend</td><td>1377</td></tr>
	<tr><td>April    </td><td>Weekend</td><td>1247</td></tr>
	<tr><td>January  </td><td>Weekend</td><td>1200</td></tr>
	<tr><td>May      </td><td>Weekend</td><td>1190</td></tr>
	<tr><td>June     </td><td>Weekend</td><td>1115</td></tr>
	<tr><td>August   </td><td>Weekend</td><td>1114</td></tr>
	<tr><td>March    </td><td>Weekend</td><td>1054</td></tr>
	<tr><td>September</td><td>Weekend</td><td>1029</td></tr>
	<tr><td>February </td><td>Weekend</td><td> 961</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>So most flights are on weekdays, but weekend flights lead in July while weekday flights lead in August.</p>
<p>But wait a minute, if I can calculate these frequencies, why not do it by the hour. That may allow us to answer such questions as: What hour of the day has the most flights, the most delays? What about by airline? What if we push this to the minute of the hour?</p>
<p>Well, first we will have to create a new variable that marks just the hour of the day in the 24-hour cycle. But to do this we will first need to create a single <code class="docutils literal notranslate"><span class="pre">flight_date_time</span></code> column that will be in the <code class="docutils literal notranslate"><span class="pre">ymd_hms</span></code> format. How? With <code class="docutils literal notranslate"><span class="pre">unite()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">unite</span><span class="p">(</span>
    <span class="n">col</span> <span class="o">=</span> <span class="s">&quot;flight_date_time&quot;</span><span class="p">,</span>
    <span class="nf">c</span><span class="p">(</span><span class="n">flight_date</span><span class="p">,</span> <span class="n">dep_time</span><span class="p">),</span>
    <span class="n">sep</span> <span class="o">=</span> <span class="s">&quot;:&quot;</span><span class="p">,</span>
    <span class="n">remove</span> <span class="o">=</span> <span class="kc">FALSE</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df</span>
</pre></div>
</div>
</div>
</div>
<p>Okay, now we create <code class="docutils literal notranslate"><span class="pre">flt_date_time</span></code> and note the seconds here are automatically coerced to be <code class="docutils literal notranslate"><span class="pre">00</span></code> because the raw date field not not include the seconds, only hour and minutes. But a proper date field must include seconds for accurate calculations and hence seconds are set to <code class="docutils literal notranslate"><span class="pre">00</span></code> here.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">flt_date_time</span> <span class="o">=</span> <span class="nf">ymd_hm</span><span class="p">(</span><span class="n">flight_date_time</span><span class="p">)</span>
      <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“ 471 failed to parse.”
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">cmh.df</span><span class="o">$</span><span class="n">flt_date_time</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-01-01 09:36:00 UTC&quot; &quot;2017-01-02 10:09:00 UTC&quot;
[3] &quot;2017-01-03 09:39:00 UTC&quot; &quot;2017-01-04 09:40:00 UTC&quot;
[5] &quot;2017-01-05 09:38:00 UTC&quot; &quot;2017-01-06 10:07:00 UTC&quot;
</pre></div>
</div>
</div>
</div>
<p>The warning indicates there are 471 flight dates that could not be parsed correctly.</p>
<p>Now we extract just the hour of the day the flight was scheduled to depart, with <code class="docutils literal notranslate"><span class="pre">hour()</span></code> and <code class="docutils literal notranslate"><span class="pre">minute()</span></code>, respectively.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">flt_hour</span> <span class="o">=</span> <span class="nf">hour</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">),</span>
    <span class="n">flt_minute</span> <span class="o">=</span> <span class="nf">minute</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df</span>
</pre></div>
</div>
</div>
</div>
<p>All righty then, now we start digging in. What hour has the most flights, and does this vary by the day of the week? By the Month?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">flt_hour</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 24 × 2</caption>
<thead>
	<tr><th scope=col>flt_hour</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>10</td><td>2626</td></tr>
	<tr><td>17</td><td>2454</td></tr>
	<tr><td> 7</td><td>2448</td></tr>
	<tr><td>16</td><td>2395</td></tr>
	<tr><td>15</td><td>2392</td></tr>
	<tr><td>14</td><td>2390</td></tr>
	<tr><td> 8</td><td>2331</td></tr>
	<tr><td> 9</td><td>2283</td></tr>
	<tr><td>18</td><td>2268</td></tr>
	<tr><td> 6</td><td>2106</td></tr>
	<tr><td>19</td><td>1829</td></tr>
	<tr><td>11</td><td>1775</td></tr>
	<tr><td>12</td><td>1670</td></tr>
	<tr><td>20</td><td>1620</td></tr>
	<tr><td>13</td><td>1533</td></tr>
	<tr><td>22</td><td>1136</td></tr>
	<tr><td> 5</td><td> 968</td></tr>
	<tr><td>21</td><td> 956</td></tr>
	<tr><td>NA</td><td> 471</td></tr>
	<tr><td>23</td><td> 253</td></tr>
	<tr><td> 0</td><td>  69</td></tr>
	<tr><td> 1</td><td>  12</td></tr>
	<tr><td> 2</td><td>   5</td></tr>
	<tr><td> 3</td><td>   3</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">count</span><span class="p">(</span><span class="n">monthname</span><span class="p">,</span> <span class="n">flt_hour</span><span class="p">,</span> <span class="n">sort</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 199 × 3</caption>
<thead>
	<tr><th scope=col>monthname</th><th scope=col>flt_hour</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;ord&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>May      </td><td>10</td><td>376</td></tr>
	<tr><td>August   </td><td> 8</td><td>328</td></tr>
	<tr><td>June     </td><td>10</td><td>325</td></tr>
	<tr><td>March    </td><td>17</td><td>323</td></tr>
	<tr><td>July     </td><td> 8</td><td>319</td></tr>
	<tr><td>May      </td><td>15</td><td>317</td></tr>
	<tr><td>April    </td><td>17</td><td>314</td></tr>
	<tr><td>May      </td><td>18</td><td>314</td></tr>
	<tr><td>March    </td><td> 7</td><td>313</td></tr>
	<tr><td>January  </td><td>16</td><td>312</td></tr>
	<tr><td>March    </td><td>16</td><td>309</td></tr>
	<tr><td>July     </td><td>10</td><td>306</td></tr>
	<tr><td>August   </td><td>10</td><td>304</td></tr>
	<tr><td>January  </td><td>14</td><td>299</td></tr>
	<tr><td>April    </td><td> 9</td><td>298</td></tr>
	<tr><td>April    </td><td>10</td><td>298</td></tr>
	<tr><td>March    </td><td>10</td><td>297</td></tr>
	<tr><td>April    </td><td>15</td><td>294</td></tr>
	<tr><td>August   </td><td>14</td><td>294</td></tr>
	<tr><td>January  </td><td> 7</td><td>287</td></tr>
	<tr><td>February </td><td> 7</td><td>287</td></tr>
	<tr><td>August   </td><td>16</td><td>287</td></tr>
	<tr><td>September</td><td> 8</td><td>287</td></tr>
	<tr><td>September</td><td>17</td><td>285</td></tr>
	<tr><td>February </td><td>14</td><td>282</td></tr>
	<tr><td>April    </td><td> 7</td><td>282</td></tr>
	<tr><td>July     </td><td> 7</td><td>282</td></tr>
	<tr><td>May      </td><td> 7</td><td>281</td></tr>
	<tr><td>June     </td><td> 6</td><td>280</td></tr>
	<tr><td>June     </td><td>15</td><td>278</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>January  </td><td>NA</td><td>42</td></tr>
	<tr><td>January  </td><td>23</td><td>36</td></tr>
	<tr><td>June     </td><td>NA</td><td>36</td></tr>
	<tr><td>February </td><td>NA</td><td>34</td></tr>
	<tr><td>August   </td><td>23</td><td>29</td></tr>
	<tr><td>April    </td><td>23</td><td>25</td></tr>
	<tr><td>March    </td><td>23</td><td>23</td></tr>
	<tr><td>May      </td><td>NA</td><td>21</td></tr>
	<tr><td>May      </td><td>23</td><td>16</td></tr>
	<tr><td>June     </td><td> 0</td><td>15</td></tr>
	<tr><td>February </td><td>23</td><td>12</td></tr>
	<tr><td>April    </td><td> 0</td><td>11</td></tr>
	<tr><td>July     </td><td> 0</td><td>10</td></tr>
	<tr><td>January  </td><td> 0</td><td> 8</td></tr>
	<tr><td>March    </td><td> 0</td><td> 8</td></tr>
	<tr><td>August   </td><td> 0</td><td> 8</td></tr>
	<tr><td>September</td><td>23</td><td> 7</td></tr>
	<tr><td>May      </td><td> 0</td><td> 5</td></tr>
	<tr><td>July     </td><td> 1</td><td> 4</td></tr>
	<tr><td>January  </td><td> 3</td><td> 3</td></tr>
	<tr><td>April    </td><td> 1</td><td> 3</td></tr>
	<tr><td>January  </td><td> 1</td><td> 2</td></tr>
	<tr><td>January  </td><td> 2</td><td> 2</td></tr>
	<tr><td>February </td><td> 0</td><td> 2</td></tr>
	<tr><td>June     </td><td> 1</td><td> 2</td></tr>
	<tr><td>September</td><td> 0</td><td> 2</td></tr>
	<tr><td>May      </td><td> 1</td><td> 1</td></tr>
	<tr><td>June     </td><td> 2</td><td> 1</td></tr>
	<tr><td>July     </td><td> 2</td><td> 1</td></tr>
	<tr><td>August   </td><td> 2</td><td> 1</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Looks like 10:00 and then 17:00, these would be your best bets if you were looking to catch a flight and wanted as many options as possible. On the flip side, this might also be the time when flights get delayed more often because there are so many flights scheduled at these hours!</p>
<p>Now I want to ask the question about delays: Are median delays higher at certain hours?Notice the results are being arranged first in descending and then in ascending order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">flt_hour</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span><span class="n">md.delay</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">dep_delay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="o">-</span><span class="n">md.delay</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 24 × 2</caption>
<thead>
	<tr><th scope=col>flt_hour</th><th scope=col>md.delay</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td> 3</td><td>290</td></tr>
	<tr><td> 2</td><td>233</td></tr>
	<tr><td> 1</td><td>174</td></tr>
	<tr><td> 0</td><td>137</td></tr>
	<tr><td>23</td><td> 49</td></tr>
	<tr><td>21</td><td>  6</td></tr>
	<tr><td>18</td><td>  2</td></tr>
	<tr><td>19</td><td>  1</td></tr>
	<tr><td>15</td><td>  0</td></tr>
	<tr><td>16</td><td>  0</td></tr>
	<tr><td>22</td><td>  0</td></tr>
	<tr><td>17</td><td> -1</td></tr>
	<tr><td>20</td><td> -1</td></tr>
	<tr><td>10</td><td> -2</td></tr>
	<tr><td>11</td><td> -2</td></tr>
	<tr><td>12</td><td> -2</td></tr>
	<tr><td>13</td><td> -2</td></tr>
	<tr><td>14</td><td> -2</td></tr>
	<tr><td> 8</td><td> -3</td></tr>
	<tr><td> 9</td><td> -3</td></tr>
	<tr><td> 5</td><td> -4</td></tr>
	<tr><td> 6</td><td> -4</td></tr>
	<tr><td> 7</td><td> -4</td></tr>
	<tr><td>NA</td><td> NA</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">flt_hour</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span><span class="n">md.delay</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">dep_delay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="n">md.delay</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 24 × 2</caption>
<thead>
	<tr><th scope=col>flt_hour</th><th scope=col>md.delay</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td> 5</td><td> -4</td></tr>
	<tr><td> 6</td><td> -4</td></tr>
	<tr><td> 7</td><td> -4</td></tr>
	<tr><td> 8</td><td> -3</td></tr>
	<tr><td> 9</td><td> -3</td></tr>
	<tr><td>10</td><td> -2</td></tr>
	<tr><td>11</td><td> -2</td></tr>
	<tr><td>12</td><td> -2</td></tr>
	<tr><td>13</td><td> -2</td></tr>
	<tr><td>14</td><td> -2</td></tr>
	<tr><td>17</td><td> -1</td></tr>
	<tr><td>20</td><td> -1</td></tr>
	<tr><td>15</td><td>  0</td></tr>
	<tr><td>16</td><td>  0</td></tr>
	<tr><td>22</td><td>  0</td></tr>
	<tr><td>19</td><td>  1</td></tr>
	<tr><td>18</td><td>  2</td></tr>
	<tr><td>21</td><td>  6</td></tr>
	<tr><td>23</td><td> 49</td></tr>
	<tr><td> 0</td><td>137</td></tr>
	<tr><td> 1</td><td>174</td></tr>
	<tr><td> 2</td><td>233</td></tr>
	<tr><td> 3</td><td>290</td></tr>
	<tr><td>NA</td><td> NA</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>The expected result – shortest median delay is at 5 AM, and delays increase by the hour.</p>
<p><strong>Bottom-line:</strong> Fly as early as you can. Might this vary by destination?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">dest_city_name</span><span class="p">,</span> <span class="n">flt_hour</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span><span class="n">md.delay</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">dep_delay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="o">-</span><span class="n">md.delay</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>`summarise()` has grouped output by &#39;dest_city_name&#39;. You can override using the `.groups` argument.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 418 × 3</caption>
<thead>
	<tr><th scope=col>dest_city_name</th><th scope=col>flt_hour</th><th scope=col>md.delay</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Newark, NJ           </td><td> 6</td><td>1046.0</td></tr>
	<tr><td>Newark, NJ           </td><td> 7</td><td> 688.0</td></tr>
	<tr><td>Denver, CO           </td><td>14</td><td> 489.0</td></tr>
	<tr><td>Houston, TX          </td><td> 7</td><td> 419.5</td></tr>
	<tr><td>Minneapolis, MN      </td><td> 0</td><td> 381.0</td></tr>
	<tr><td>Atlanta, GA          </td><td> 1</td><td> 348.0</td></tr>
	<tr><td>New York, NY         </td><td> 0</td><td> 337.0</td></tr>
	<tr><td>Tampa, FL            </td><td> 1</td><td> 324.0</td></tr>
	<tr><td>Nashville, TN        </td><td>23</td><td> 323.0</td></tr>
	<tr><td>Fort Myers, FL       </td><td> 0</td><td> 297.0</td></tr>
	<tr><td>Columbus, OH         </td><td> 3</td><td> 290.0</td></tr>
	<tr><td>Phoenix, AZ          </td><td>23</td><td> 286.0</td></tr>
	<tr><td>Washington, DC       </td><td>22</td><td> 283.5</td></tr>
	<tr><td>New Orleans, LA      </td><td> 0</td><td> 279.0</td></tr>
	<tr><td>St. Louis, MO        </td><td> 1</td><td> 278.0</td></tr>
	<tr><td>Fort Myers, FL       </td><td>21</td><td> 270.0</td></tr>
	<tr><td>Fort Myers, FL       </td><td>22</td><td> 263.0</td></tr>
	<tr><td>Atlanta, GA          </td><td>22</td><td> 262.5</td></tr>
	<tr><td>Nashville, TN        </td><td>22</td><td> 261.0</td></tr>
	<tr><td>Dallas, TX           </td><td>21</td><td> 255.0</td></tr>
	<tr><td>Fort Myers, FL       </td><td>23</td><td> 255.0</td></tr>
	<tr><td>Atlanta, GA          </td><td> 0</td><td> 254.0</td></tr>
	<tr><td>Phoenix, AZ          </td><td>22</td><td> 249.5</td></tr>
	<tr><td>Atlanta, GA          </td><td>23</td><td> 243.0</td></tr>
	<tr><td>Tampa, FL            </td><td> 0</td><td> 234.0</td></tr>
	<tr><td>Columbus, OH         </td><td> 2</td><td> 233.0</td></tr>
	<tr><td>Los Angeles, CA      </td><td>15</td><td> 227.0</td></tr>
	<tr><td>Detroit, MI          </td><td>12</td><td> 223.0</td></tr>
	<tr><td>Dallas/Fort Worth, TX</td><td>22</td><td> 213.0</td></tr>
	<tr><td>New York, NY         </td><td>14</td><td> 196.0</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Houston, TX          </td><td> 5</td><td> -8</td></tr>
	<tr><td>Newark, NJ           </td><td>19</td><td> -8</td></tr>
	<tr><td>Houston, TX          </td><td>11</td><td> -9</td></tr>
	<tr><td>Nashville, TN        </td><td>11</td><td> -9</td></tr>
	<tr><td>Dallas/Fort Worth, TX</td><td>10</td><td>-10</td></tr>
	<tr><td>Philadelphia, PA     </td><td>17</td><td>-10</td></tr>
	<tr><td>St. Louis, MO        </td><td>19</td><td>-12</td></tr>
	<tr><td>Atlanta, GA          </td><td>NA</td><td> NA</td></tr>
	<tr><td>Baltimore, MD        </td><td>NA</td><td> NA</td></tr>
	<tr><td>Boston, MA           </td><td>NA</td><td> NA</td></tr>
	<tr><td>Chicago, IL          </td><td>NA</td><td> NA</td></tr>
	<tr><td>Columbus, OH         </td><td>NA</td><td> NA</td></tr>
	<tr><td>Dallas, TX           </td><td>NA</td><td> NA</td></tr>
	<tr><td>Dallas/Fort Worth, TX</td><td>NA</td><td> NA</td></tr>
	<tr><td>Denver, CO           </td><td>NA</td><td> NA</td></tr>
	<tr><td>Detroit, MI          </td><td>NA</td><td> NA</td></tr>
	<tr><td>Fort Lauderdale, FL  </td><td>NA</td><td> NA</td></tr>
	<tr><td>Fort Myers, FL       </td><td>NA</td><td> NA</td></tr>
	<tr><td>Houston, TX          </td><td>NA</td><td> NA</td></tr>
	<tr><td>Los Angeles, CA      </td><td>NA</td><td> NA</td></tr>
	<tr><td>Minneapolis, MN      </td><td>NA</td><td> NA</td></tr>
	<tr><td>Nashville, TN        </td><td>NA</td><td> NA</td></tr>
	<tr><td>New York, NY         </td><td>NA</td><td> NA</td></tr>
	<tr><td>Newark, NJ           </td><td>NA</td><td> NA</td></tr>
	<tr><td>Orlando, FL          </td><td>NA</td><td> NA</td></tr>
	<tr><td>Philadelphia, PA     </td><td>NA</td><td> NA</td></tr>
	<tr><td>Phoenix, AZ          </td><td>NA</td><td> NA</td></tr>
	<tr><td>St. Louis, MO        </td><td>NA</td><td> NA</td></tr>
	<tr><td>Tampa, FL            </td><td>NA</td><td> NA</td></tr>
	<tr><td>Washington, DC       </td><td>NA</td><td> NA</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Avoid flying to Newark, NJ, even at 6 or 7 AM.</p>
<p>Might these vary by airline?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">carrier</span><span class="p">,</span> <span class="n">dest_city_name</span><span class="p">,</span> <span class="n">flt_hour</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span><span class="n">md.delay</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">dep_delay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="o">-</span><span class="n">md.delay</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>`summarise()` has grouped output by &#39;carrier&#39;, &#39;dest_city_name&#39;. You can override using the `.groups` argument.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 656 × 4</caption>
<thead>
	<tr><th scope=col>carrier</th><th scope=col>dest_city_name</th><th scope=col>flt_hour</th><th scope=col>md.delay</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>EV</td><td>Newark, NJ     </td><td> 6</td><td>1046.0</td></tr>
	<tr><td>EV</td><td>Chicago, IL    </td><td> 6</td><td>1024.0</td></tr>
	<tr><td>EV</td><td>Newark, NJ     </td><td> 7</td><td> 688.0</td></tr>
	<tr><td>DL</td><td>Columbus, OH   </td><td> 5</td><td> 526.0</td></tr>
	<tr><td>F9</td><td>Denver, CO     </td><td>14</td><td> 489.0</td></tr>
	<tr><td>DL</td><td>Los Angeles, CA</td><td>15</td><td> 481.0</td></tr>
	<tr><td>AA</td><td>Phoenix, AZ    </td><td>15</td><td> 463.0</td></tr>
	<tr><td>EV</td><td>Houston, TX    </td><td> 7</td><td> 419.5</td></tr>
	<tr><td>UA</td><td>Chicago, IL    </td><td> 0</td><td> 394.0</td></tr>
	<tr><td>DL</td><td>Minneapolis, MN</td><td> 0</td><td> 381.0</td></tr>
	<tr><td>DL</td><td>Atlanta, GA    </td><td> 1</td><td> 348.0</td></tr>
	<tr><td>F9</td><td>Orlando, FL    </td><td>18</td><td> 339.5</td></tr>
	<tr><td>EV</td><td>New York, NY   </td><td> 0</td><td> 337.0</td></tr>
	<tr><td>WN</td><td>Tampa, FL      </td><td> 1</td><td> 324.0</td></tr>
	<tr><td>WN</td><td>Nashville, TN  </td><td>23</td><td> 323.0</td></tr>
	<tr><td>AA</td><td>Phoenix, AZ    </td><td>23</td><td> 309.0</td></tr>
	<tr><td>DL</td><td>Atlanta, GA    </td><td>22</td><td> 303.0</td></tr>
	<tr><td>UA</td><td>Chicago, IL    </td><td>22</td><td> 299.0</td></tr>
	<tr><td>WN</td><td>Fort Myers, FL </td><td> 0</td><td> 297.0</td></tr>
	<tr><td>DL</td><td>Columbus, OH   </td><td> 3</td><td> 290.0</td></tr>
	<tr><td>WN</td><td>Washington, DC </td><td>22</td><td> 283.5</td></tr>
	<tr><td>UA</td><td>Denver, CO     </td><td>13</td><td> 279.0</td></tr>
	<tr><td>WN</td><td>New Orleans, LA</td><td> 0</td><td> 279.0</td></tr>
	<tr><td>WN</td><td>St. Louis, MO  </td><td> 1</td><td> 278.0</td></tr>
	<tr><td>AA</td><td>Phoenix, AZ    </td><td>22</td><td> 272.0</td></tr>
	<tr><td>F9</td><td>Columbus, OH   </td><td>22</td><td> 270.0</td></tr>
	<tr><td>WN</td><td>Fort Myers, FL </td><td>21</td><td> 270.0</td></tr>
	<tr><td>F9</td><td>Denver, CO     </td><td>10</td><td> 264.0</td></tr>
	<tr><td>F9</td><td>Fort Myers, FL </td><td>22</td><td> 263.0</td></tr>
	<tr><td>WN</td><td>Phoenix, AZ    </td><td>23</td><td> 263.0</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>DL</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>DL</td><td>Los Angeles, CA    </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>Detroit, MI        </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>Houston, TX        </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>Minneapolis, MN    </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>New York, NY       </td><td>NA</td><td>NA</td></tr>
	<tr><td>EV</td><td>Newark, NJ         </td><td>NA</td><td>NA</td></tr>
	<tr><td>F9</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>F9</td><td>Denver, CO         </td><td>NA</td><td>NA</td></tr>
	<tr><td>F9</td><td>Orlando, FL        </td><td>NA</td><td>NA</td></tr>
	<tr><td>OO</td><td>Chicago, IL        </td><td>NA</td><td>NA</td></tr>
	<tr><td>OO</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>OO</td><td>Denver, CO         </td><td>NA</td><td>NA</td></tr>
	<tr><td>UA</td><td>Chicago, IL        </td><td>NA</td><td>NA</td></tr>
	<tr><td>UA</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>UA</td><td>Denver, CO         </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Atlanta, GA        </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Baltimore, MD      </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Boston, MA         </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Chicago, IL        </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Columbus, OH       </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Dallas, TX         </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Fort Lauderdale, FL</td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Fort Myers, FL     </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Nashville, TN      </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Orlando, FL        </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>St. Louis, MO      </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Tampa, FL          </td><td>NA</td><td>NA</td></tr>
	<tr><td>WN</td><td>Washington, DC     </td><td>NA</td><td>NA</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Worst early-morning delays are for EV, to Newark and to Chicago.</p>
</div>
</div>
<div class="section" id="passage-of-time">
<h3>Passage of Time<a class="headerlink" href="#passage-of-time" title="Permalink to this headline">¶</a></h3>
<p>Let us assume we are interested in seeing how much time lapses between successive flights of <strong>each aircraft</strong> seen in the data. We know we can identify each unique aircraft by its <code class="docutils literal notranslate"><span class="pre">tail_num</span></code>. So let us first see how many times is each aircraft seen and create a new column called <code class="docutils literal notranslate"><span class="pre">number_flew</span></code>.</p>
<p>Some rows of data are missing <code class="docutils literal notranslate"><span class="pre">flt_date_time</span></code> and <code class="docutils literal notranslate"><span class="pre">tail_num</span></code> so I will filter these out as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span> <span class="c1"># eliminates all rows where both these columns are blank </span>
    <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">tail_num</span><span class="p">),</span>
    <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">)</span> 
    <span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_by</span><span class="p">(</span><span class="n">tail_num</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">arrange</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="c1"># each aircraft is now stacked by when it flew</span>
  <span class="nf">mutate</span><span class="p">(</span><span class="n">n_flew</span> <span class="o">=</span> <span class="nf">row_number</span><span class="p">())</span> <span class="o">%&gt;%</span> <span class="c1"># each time aan aircraft is seen it gets a number, 1, 2, 3, and so on ... </span>
  <span class="nf">select</span><span class="p">(</span><span class="n">tail_num</span><span class="p">,</span> <span class="n">flt_date_time</span><span class="p">,</span> <span class="n">n_flew</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="o">-</span><span class="n">n_flew</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df2</span> <span class="c1"># N396SW is seen the most often in this data-set </span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df2</span> <span class="o">%&gt;%</span>
  <span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 6 × 3</caption>
<thead>
	<tr><th scope=col>tail_num</th><th scope=col>flt_date_time</th><th scope=col>n_flew</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dttm&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>N396SW</td><td>2017-08-23 10:07:00</td><td>73</td></tr>
	<tr><td>N396SW</td><td>2017-08-23 08:07:00</td><td>72</td></tr>
	<tr><td>N396SW</td><td>2017-08-19 08:20:00</td><td>71</td></tr>
	<tr><td>N396SW</td><td>2017-08-18 15:24:00</td><td>70</td></tr>
	<tr><td>N396SW</td><td>2017-08-06 21:43:00</td><td>69</td></tr>
	<tr><td>N396SW</td><td>2017-08-06 18:53:00</td><td>68</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>So far so good; <a class="reference external" href="https://www.planespotters.net/airframe/boeing-737-n396sw-aerothrust-holdings/38l2ge">N396SW is the winner and has well-earned its retirement</a>.</p>
<p>Now we need to see how much time lapsed between flights, and this is just the difference between the <strong>preceding</strong> <code class="docutils literal notranslate"><span class="pre">flt_date_time</span></code> recorded and the <strong>most recent</strong> <code class="docutils literal notranslate"><span class="pre">flt_date_time</span></code>. As we do this, note that by default time span (<code class="docutils literal notranslate"><span class="pre">ytspan</span></code>) is calculated in seconds.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df2</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">tail_num</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">arrange</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">tspan</span> <span class="o">=</span> <span class="nf">interval</span><span class="p">(</span>
      <span class="nf">lag</span><span class="p">(</span><span class="n">flt_date_time</span><span class="p">,</span> <span class="n">order_by</span> <span class="o">=</span> <span class="n">tail_num</span><span class="p">),</span> <span class="n">flt_date_time</span>
      <span class="p">),</span> <span class="c1"># calculate the time span between successive flights recorded and save as new varable tspan</span>
    <span class="n">tspan.minutes</span> <span class="o">=</span> <span class="nf">as.duration</span><span class="p">(</span><span class="n">tspan</span><span class="p">)</span><span class="o">/</span><span class="nf">dminutes</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="c1"># convert tspan into minutes and save as tspan.minutes</span>
    <span class="n">tspan.hours</span> <span class="o">=</span> <span class="nf">as.duration</span><span class="p">(</span><span class="n">tspan</span><span class="p">)</span><span class="o">/</span><span class="nf">dhours</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="c1"># convert tspan into hours and save as tspan.hours</span>
    <span class="n">tspan.days</span> <span class="o">=</span> <span class="nf">as.duration</span><span class="p">(</span><span class="n">tspan</span><span class="p">)</span><span class="o">/</span><span class="nf">ddays</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="c1"># convert tspan into days and save as tspan.days </span>
    <span class="n">tspan.weeks</span> <span class="o">=</span> <span class="nf">as.duration</span><span class="p">(</span><span class="n">tspan</span><span class="p">)</span><span class="o">/</span><span class="nf">dweeks</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="c1"># convert tspan into weeks and save as tspan.weeks </span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cmh.df2</span> 
</pre></div>
</div>
</div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">tspan</span></code> is being converted into, say, minutes by dividing it by 60, into hours by dividing tspan by 60 x 60 = 3600, and so on.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">dminutes(1)</span></code> is calculating the time span in one-minute intervals. Similarly for hours, days, and weeks. Thus if you ran <code class="docutils literal notranslate"><span class="pre">dhours(2)</span></code> you would get the time interval in 2-hour increments.</p>
<p>There is a lot more we could do with time but the few things we have covered so far would be the more common tasks we usually encounter.</p>
<p>Before we move on, let us see the flight sequence of <strong>N396SW</strong> …</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df2</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="n">tail_num</span> <span class="o">==</span> <span class="s">&quot;N396SW&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">head</span><span class="p">(</span><span class="n">.</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 10 × 8</caption>
<thead>
	<tr><th scope=col>tail_num</th><th scope=col>flt_date_time</th><th scope=col>n_flew</th><th scope=col>tspan</th><th scope=col>tspan.minutes</th><th scope=col>tspan.hours</th><th scope=col>tspan.days</th><th scope=col>tspan.weeks</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dttm&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;Interval&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>N396SW</td><td>2017-01-05 09:30:00</td><td> 1</td><td>NA--NA</td><td>   NA</td><td>        NA</td><td>         NA</td><td>        NA</td></tr>
	<tr><td>N396SW</td><td>2017-01-05 12:19:00</td><td> 2</td><td>2017-01-05 09:30:00 UTC--2017-01-05 12:19:00 UTC</td><td>  169</td><td>  2.816667</td><td> 0.11736111</td><td>0.01676587</td></tr>
	<tr><td>N396SW</td><td>2017-01-11 08:34:00</td><td> 3</td><td>2017-01-05 12:19:00 UTC--2017-01-11 08:34:00 UTC</td><td> 8415</td><td>140.250000</td><td> 5.84375000</td><td>0.83482143</td></tr>
	<tr><td>N396SW</td><td>2017-01-11 10:44:00</td><td> 4</td><td>2017-01-11 08:34:00 UTC--2017-01-11 10:44:00 UTC</td><td>  130</td><td>  2.166667</td><td> 0.09027778</td><td>0.01289683</td></tr>
	<tr><td>N396SW</td><td>2017-01-19 10:31:00</td><td> 5</td><td>2017-01-11 10:44:00 UTC--2017-01-19 10:31:00 UTC</td><td>11507</td><td>191.783333</td><td> 7.99097222</td><td>1.14156746</td></tr>
	<tr><td>N396SW</td><td>2017-01-19 14:28:00</td><td> 6</td><td>2017-01-19 10:31:00 UTC--2017-01-19 14:28:00 UTC</td><td>  237</td><td>  3.950000</td><td> 0.16458333</td><td>0.02351190</td></tr>
	<tr><td>N396SW</td><td>2017-02-10 08:23:00</td><td> 7</td><td>2017-01-19 14:28:00 UTC--2017-02-10 08:23:00 UTC</td><td>31315</td><td>521.916667</td><td>21.74652778</td><td>3.10664683</td></tr>
	<tr><td>N396SW</td><td>2017-02-10 10:32:00</td><td> 8</td><td>2017-02-10 08:23:00 UTC--2017-02-10 10:32:00 UTC</td><td>  129</td><td>  2.150000</td><td> 0.08958333</td><td>0.01279762</td></tr>
	<tr><td>N396SW</td><td>2017-02-15 15:20:00</td><td> 9</td><td>2017-02-10 10:32:00 UTC--2017-02-15 15:20:00 UTC</td><td> 7488</td><td>124.800000</td><td> 5.20000000</td><td>0.74285714</td></tr>
	<tr><td>N396SW</td><td>2017-02-15 18:15:00</td><td>10</td><td>2017-02-15 15:20:00 UTC--2017-02-15 18:15:00 UTC</td><td>  175</td><td>  2.916667</td><td> 0.12152778</td><td>0.01736111</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">cmh.df2</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="n">tail_num</span> <span class="o">==</span> <span class="s">&quot;N396SW&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">tail</span><span class="p">(</span><span class="n">.</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 10 × 8</caption>
<thead>
	<tr><th scope=col>tail_num</th><th scope=col>flt_date_time</th><th scope=col>n_flew</th><th scope=col>tspan</th><th scope=col>tspan.minutes</th><th scope=col>tspan.hours</th><th scope=col>tspan.days</th><th scope=col>tspan.weeks</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dttm&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;Interval&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>N396SW</td><td>2017-07-25 08:28:00</td><td>64</td><td>2017-07-14 11:04:00 UTC--2017-07-25 08:28:00 UTC</td><td>15684</td><td>261.400000</td><td>10.89166667</td><td>1.55595238</td></tr>
	<tr><td>N396SW</td><td>2017-07-25 11:18:00</td><td>65</td><td>2017-07-25 08:28:00 UTC--2017-07-25 11:18:00 UTC</td><td>  170</td><td>  2.833333</td><td> 0.11805556</td><td>0.01686508</td></tr>
	<tr><td>N396SW</td><td>2017-07-30 16:24:00</td><td>66</td><td>2017-07-25 11:18:00 UTC--2017-07-30 16:24:00 UTC</td><td> 7506</td><td>125.100000</td><td> 5.21250000</td><td>0.74464286</td></tr>
	<tr><td>N396SW</td><td>2017-07-30 18:31:00</td><td>67</td><td>2017-07-30 16:24:00 UTC--2017-07-30 18:31:00 UTC</td><td>  127</td><td>  2.116667</td><td> 0.08819444</td><td>0.01259921</td></tr>
	<tr><td>N396SW</td><td>2017-08-06 18:53:00</td><td>68</td><td>2017-07-30 18:31:00 UTC--2017-08-06 18:53:00 UTC</td><td>10102</td><td>168.366667</td><td> 7.01527778</td><td>1.00218254</td></tr>
	<tr><td>N396SW</td><td>2017-08-06 21:43:00</td><td>69</td><td>2017-08-06 18:53:00 UTC--2017-08-06 21:43:00 UTC</td><td>  170</td><td>  2.833333</td><td> 0.11805556</td><td>0.01686508</td></tr>
	<tr><td>N396SW</td><td>2017-08-18 15:24:00</td><td>70</td><td>2017-08-06 21:43:00 UTC--2017-08-18 15:24:00 UTC</td><td>16901</td><td>281.683333</td><td>11.73680556</td><td>1.67668651</td></tr>
	<tr><td>N396SW</td><td>2017-08-19 08:20:00</td><td>71</td><td>2017-08-18 15:24:00 UTC--2017-08-19 08:20:00 UTC</td><td> 1016</td><td> 16.933333</td><td> 0.70555556</td><td>0.10079365</td></tr>
	<tr><td>N396SW</td><td>2017-08-23 08:07:00</td><td>72</td><td>2017-08-19 08:20:00 UTC--2017-08-23 08:07:00 UTC</td><td> 5747</td><td> 95.783333</td><td> 3.99097222</td><td>0.57013889</td></tr>
	<tr><td>N396SW</td><td>2017-08-23 10:07:00</td><td>73</td><td>2017-08-23 08:07:00 UTC--2017-08-23 10:07:00 UTC</td><td>  120</td><td>  2.000000</td><td> 0.08333333</td><td>0.01190476</td></tr>
</tbody>
</table>
</div></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="tex2jax_ignore mathjax_ignore section" id="exercises-for-practice">
<h1>Exercises for Practice<a class="headerlink" href="#exercises-for-practice" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-01">
<h2>Exercise 01<a class="headerlink" href="#exercise-01" title="Permalink to this headline">¶</a></h2>
<p>The data below come from <a class="reference external" href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-09-10">tidytuesday</a> and provide information on accidents at theme parks. You can see more of these <a class="reference external" href="https://ridesdatabase.org/saferparks/data/">data available here</a>. The data give you some details of where and when the accident occurred, and something about the injured party as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span>

<span class="nf">read_csv</span><span class="p">(</span>
    <span class="s">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-09-10/saferparks.csv&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">safer_parks</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">8351</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">23</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (17): acc_date, acc_state, acc_city, fix_port, source, bus_type, industr...
<span class=" -Color -Color-Green">dbl</span>  (6): acc_id, num_injured, age_youngest, mechanical, op_error, employee
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use <span class=" -Color -Color-Black -Color-Black-BGWhite">`spec()`</span> to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set <span class=" -Color -Color-Black -Color-Black-BGWhite">`show_col_types = FALSE`</span> to quiet this message.
</pre></div>
</div>
</div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>variable</p></th>
<th class="text-align:left head"><p>class</p></th>
<th class="text-align:left head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>acc_id</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Unique ID</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>acc_date</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Accident Date</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>acc_state</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Accident State</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>acc_city</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Accident City</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>fix_port</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>source</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Source of injury report</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>bus_type</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Business type</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>industry_sector</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Industry sector</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>device_category</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Device category</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>device_type</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Device type</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>tradename_or_generic</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Common name of the device</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>manufacturer</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Manufacturer of device</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>num_injured</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Num injured</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>age_youngest</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Youngest individual injured</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>gender</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Gender of individual injured</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>acc_desc</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Description of accident</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>injury_desc</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Injury description</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>report</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Report URL</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>category</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Category of accident</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>mechanical</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Mechanical failure (binary NA/1)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>op_error</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Operator error (binary NA/1)</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>employee</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Employee error (binary NA/1)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>notes</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Additional notes</p></td>
</tr>
</tbody>
</table>
<p>Working with the <code class="docutils literal notranslate"><span class="pre">safer_parks</span></code> data, complete the following tasks.</p>
<div class="section" id="problem-a">
<h3>Problem (a)<a class="headerlink" href="#problem-a" title="Permalink to this headline">¶</a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">acc_date</span></code>, create a new date variable called <code class="docutils literal notranslate"><span class="pre">idate</span></code> that is a proper date column generated via <code class="docutils literal notranslate"><span class="pre">{lubridate}</span></code>.</p>
</div>
<div class="section" id="problem-b">
<h3>Problem (b)<a class="headerlink" href="#problem-b" title="Permalink to this headline">¶</a></h3>
<p>Now create new columns for (i) the month of the accident, and (ii) the day of the week. These should not be abbreviated (i.e., we should see the values as ‘Monday’ instead of ‘Mon’, “July” instead of “Jul”).</p>
<p>What month had the highest number of accidents?</p>
<p>What day of the week had the highest number of accidents?</p>
</div>
<div class="section" id="problem-c">
<h3>Problem (c)<a class="headerlink" href="#problem-c" title="Permalink to this headline">¶</a></h3>
<p>What if you look at days of the week by month? Does the same day of the week show up with the most accidents regardless of month or do we see some variation?</p>
</div>
<div class="section" id="problem-d">
<h3>Problem (d)<a class="headerlink" href="#problem-d" title="Permalink to this headline">¶</a></h3>
<p>What were the <code class="docutils literal notranslate"><span class="pre">five</span></code> dates with the most number of accidents?</p>
</div>
<div class="section" id="problem-e">
<h3>Problem (e)<a class="headerlink" href="#problem-e" title="Permalink to this headline">¶</a></h3>
<p>Using the Texas injury data, answer the following question: What ride was the safest? [Hint: For each ride (<code class="docutils literal notranslate"><span class="pre">ride_name</span></code>) you will need to calculate the number of days between accidents. The ride with the highest number of days is the safest.]</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">read_csv</span><span class="p">(</span>
  <span class="s">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-09-10/tx_injuries.csv&quot;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tx_injuries</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">542</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">13</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (12): name_of_operation, city, st, injury_date, ride_name, serial_no, ge...
<span class=" -Color -Color-Green">dbl</span>  (1): injury_report_rec
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use <span class=" -Color -Color-Black -Color-Black-BGWhite">`spec()`</span> to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set <span class=" -Color -Color-Black -Color-Black-BGWhite">`show_col_types = FALSE`</span> to quiet this message.
</pre></div>
</div>
</div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>variable</p></th>
<th class="text-align:left head"><p>class</p></th>
<th class="text-align:left head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>injury_report_rec</p></td>
<td class="text-align:left"><p>double</p></td>
<td class="text-align:left"><p>Unique Record ID</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>name_of_operation</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Company name</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>city</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>City</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>st</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>State (all TX)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>injury_date</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Injury date - note there are some different formats</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>ride_name</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Ride Name</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>serial_no</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Serial number of ride</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>gender</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Gender of the injured individual</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>age</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Age of the injured individual</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>body_part</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Body part injured</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>alleged_injury</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Alleged injury - type of injury</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>cause_of_injury</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Approximate cause of the injury (free text)</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>other</p></td>
<td class="text-align:left"><p>character</p></td>
<td class="text-align:left"><p>Anecdotal information in addition to cause of injury</p></td>
</tr>
</tbody>
</table>
<p>You should note that this assumes each ride was in operation for the same amount of time. If this is not true then our estimates will be unreliable.</p>
</div>
</div>
<div class="section" id="exercise-02">
<h2>Exercise 02<a class="headerlink" href="#exercise-02" title="Permalink to this headline">¶</a></h2>
<p>These data (see below) come from this story: <a class="reference external" href="https://www.economist.com/graphic-detail/2018/10/18/the-space-race-is-dominated-by-new-contenders">The next generation: The space race is dominated by new contenders</a>. You have data on space missions over time, with dates of the launch, the launching agency/country, type of launch vehicle, and so on.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>variable</p></th>
<th class="head"><p>definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tag</p></td>
<td><p>Harvard or [COSPAR][cospar] id of launch</p></td>
</tr>
<tr class="row-odd"><td><p>JD</p></td>
<td><p>[Julian Date][jd] of launch</p></td>
</tr>
<tr class="row-even"><td><p>launch_date</p></td>
<td><p>date of launch</p></td>
</tr>
<tr class="row-odd"><td><p>launch_year</p></td>
<td><p>year of launch</p></td>
</tr>
<tr class="row-even"><td><p>type</p></td>
<td><p>type of launch vehicle</p></td>
</tr>
<tr class="row-odd"><td><p>variant</p></td>
<td><p>variant of launch vehicle</p></td>
</tr>
<tr class="row-even"><td><p>mission</p></td>
<td><p>space mission</p></td>
</tr>
<tr class="row-odd"><td><p>agency</p></td>
<td><p>launching agency</p></td>
</tr>
<tr class="row-even"><td><p>state_code</p></td>
<td><p>launching agency’s state</p></td>
</tr>
<tr class="row-odd"><td><p>category</p></td>
<td><p>success (O) or failure (F)</p></td>
</tr>
<tr class="row-even"><td><p>agency_type</p></td>
<td><p>type of agency</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">read_csv</span><span class="p">(</span>
  <span class="s">&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-01-15/launches.csv&quot;</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">launches</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">5726</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">11</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span>  (8): tag, type, variant, mission, agency, state_code, category, agency_...
<span class=" -Color -Color-Green">dbl</span>  (2): JD, launch_year
<span class=" -Color -Color-Blue">date</span> (1): launch_date
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use <span class=" -Color -Color-Black -Color-Black-BGWhite">`spec()`</span> to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set <span class=" -Color -Color-Black -Color-Black-BGWhite">`show_col_types = FALSE`</span> to quiet this message.
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h3>Problem (a)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Create a new column called <code class="docutils literal notranslate"><span class="pre">date</span></code> that stores <code class="docutils literal notranslate"><span class="pre">launch_date</span></code> as a proper data field in ymd format from {lubridate}.</p>
</div>
<div class="section" id="id2">
<h3>Problem (b)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Creating columns as needed, calculate and show the number of launches first by year, then by month, and then by day of the week. The result should be arranged in descending order of the number of launches.</p>
</div>
<div class="section" id="id3">
<h3>Problem (c)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>How many launches were successful <code class="docutils literal notranslate"><span class="pre">(O)</span></code> versus failed <code class="docutils literal notranslate"><span class="pre">(F)</span></code> by country and year? The countries of interest will be state_code values of “CN”, “F”, “J”, “RU”, “SU”, “US”. You do not need to arrange your results in any order.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "aniruhil/jb5830-repo",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            kernelName: "ir",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="Module03.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Rearranging Data with {tidyr}</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="Module05.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Visualizing Data with {ggplot2}</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Ani Ruhil<br/>
        
            &copy; Copyright 2021.<br/>
          <div class="extra_footer">
            Fall 2021
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>